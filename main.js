/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Oa=Object.create;var Zt=Object.defineProperty;var _a=Object.getOwnPropertyDescriptor;var Ta=Object.getOwnPropertyNames;var Ma=Object.getPrototypeOf,Ca=Object.prototype.hasOwnProperty;var Or=f=>Zt(f,"__esModule",{value:!0});var _r=(f,o)=>()=>(o||f((o={exports:{}}).exports,o),o.exports),Aa=(f,o)=>{Or(f);for(var l in o)Zt(f,l,{get:o[l],enumerable:!0})},Da=(f,o,l)=>{if(o&&typeof o=="object"||typeof o=="function")for(let h of Ta(o))!Ca.call(f,h)&&h!=="default"&&Zt(f,h,{get:()=>o[h],enumerable:!(l=_a(o,h))||l.enumerable});return f},Ue=f=>Da(Or(Zt(f!=null?Oa(Ma(f)):{},"default",f&&f.__esModule&&"default"in f?{get:()=>f.default,enumerable:!0}:{value:f,enumerable:!0})),f);var Mr=_r((Za,Tr)=>{Tr.exports=function(o,l){l||(l=[0,""]),o=String(o);var h=parseFloat(o,10);return l[0]=h,l[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",l}});var $r=_r((Yr,Qn)=>{(function(f){typeof Yr=="object"&&typeof Qn!="undefined"?Qn.exports=f():typeof define=="function"&&define.amd?define([],f):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).interact=f()})(function(){var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,f.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.init=g,o.getWindow=function(e){return(0,f.default)(e)?e:(e.ownerDocument||e).defaultView||h.window},o.window=o.realWindow=void 0;var l=void 0;o.realWindow=l;var h=void 0;function g(e){o.realWindow=l=e;var t=e.document.createTextNode("");t.ownerDocument!==e.document&&typeof e.wrap=="function"&&e.wrap(t)===t&&(e=e.wrap(e)),o.window=h=e}o.window=h,typeof window!="undefined"&&window&&g(window);var d={};function w(e){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var S=function(e){return!!e&&w(e)==="object"},x=function(e){return typeof e=="function"},O={window:function(e){return e===o.window||(0,f.default)(e)},docFrag:function(e){return S(e)&&e.nodeType===11},object:S,func:x,number:function(e){return typeof e=="number"},bool:function(e){return typeof e=="boolean"},string:function(e){return typeof e=="string"},element:function(e){if(!e||w(e)!=="object")return!1;var t=o.getWindow(e)||o.window;return/object|function/.test(w(t.Element))?e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"},plainObject:function(e){return S(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return S(e)&&e.length!==void 0&&x(e.splice)}};d.default=O;var T={};function _(e){var t=e.interaction;if(t.prepared.name==="drag"){var i=t.prepared.axis;i==="x"?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):i==="y"&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function z(e){var t=e.iEvent,i=e.interaction;if(i.prepared.name==="drag"){var n=i.prepared.axis;if(n==="x"||n==="y"){var r=n==="x"?"y":"x";t.page[r]=i.coords.start.page[r],t.client[r]=i.coords.start.client[r],t.delta[r]=0}}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=void 0;var j={id:"actions/drag",install:function(e){var t=e.actions,i=e.Interactable,n=e.defaults;i.prototype.draggable=j.draggable,t.map.drag=j,t.methodDict.drag="draggable",n.actions.drag=j.defaults},listeners:{"interactions:before-action-move":_,"interactions:action-resume":_,"interactions:action-move":z,"auto-start:check":function(e){var t=e.interaction,i=e.interactable,n=e.buttons,r=i.options.drag;if(r&&r.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(n&i.options.drag.mouseButtons)!=0))return e.action={name:"drag",axis:r.lockAxis==="start"?r.startAxis:r.lockAxis},!1}},draggable:function(e){return d.default.object(e)?(this.options.drag.enabled=e.enabled!==!1,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):d.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:_,move:z,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},B=j;T.default=B;var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.default=void 0;var V={init:function(e){var t=e;V.document=t.document,V.DocumentFragment=t.DocumentFragment||Q,V.SVGElement=t.SVGElement||Q,V.SVGSVGElement=t.SVGSVGElement||Q,V.SVGElementInstance=t.SVGElementInstance||Q,V.Element=t.Element||Q,V.HTMLElement=t.HTMLElement||V.Element,V.Event=t.Event,V.Touch=t.Touch||Q,V.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function Q(){}var le=V;I.default=le;var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var ee={init:function(e){var t=I.default.Element,i=e.navigator||{};ee.supportsTouch="ontouchstart"in e||d.default.func(e.DocumentTouch)&&I.default.document instanceof e.DocumentTouch,ee.supportsPointerEvent=i.pointerEnabled!==!1&&!!I.default.PointerEvent,ee.isIOS=/iP(hone|od|ad)/.test(i.platform),ee.isIOS7=/iP(hone|od|ad)/.test(i.platform)&&/OS 7[^\d]/.test(i.appVersion),ee.isIe9=/MSIE 9/.test(i.userAgent),ee.isOperaMobile=i.appName==="Opera"&&ee.supportsTouch&&/Presto/.test(i.userAgent),ee.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",ee.pEventTypes=ee.supportsPointerEvent?I.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,ee.wheelEvent=I.default.document&&"onmousewheel"in I.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},an=ee;G.default=an;var L={};function gt(e){var t=e.parentNode;if(d.default.docFrag(t)){for(;(t=t.host)&&d.default.docFrag(t););return t}return t}function mt(e,t){return o.window!==o.realWindow&&(t=t.replace(/\/deep\//g," ")),e[G.default.prefixedMatchesSelector](t)}Object.defineProperty(L,"__esModule",{value:!0}),L.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},L.closest=function(e,t){for(;d.default.element(e);){if(mt(e,t))return e;e=gt(e)}return null},L.parentNode=gt,L.matchesSelector=mt,L.indexOfDeepestElement=function(e){for(var t,i=[],n=0;n<e.length;n++){var r=e[n],a=e[t];if(r&&n!==t)if(a){var u=sn(r),s=sn(a);if(u!==r.ownerDocument)if(s!==r.ownerDocument)if(u!==s){i=i.length?i:ti(a);var c=void 0;if(a instanceof I.default.HTMLElement&&r instanceof I.default.SVGElement&&!(r instanceof I.default.SVGSVGElement)){if(r===s)continue;c=r.ownerSVGElement}else c=r;for(var p=ti(c,a.ownerDocument),v=0;p[v]&&p[v]===i[v];)v++;var m=[p[v-1],p[v],i[v]];if(m[0])for(var b=m[0].lastChild;b;){if(b===m[1]){t=n,i=p;break}if(b===m[2])break;b=b.previousSibling}}else E=r,y=a,(parseInt(o.getWindow(E).getComputedStyle(E).zIndex,10)||0)>=(parseInt(o.getWindow(y).getComputedStyle(y).zIndex,10)||0)&&(t=n);else t=n}else t=n}var E,y;return t},L.matchesUpTo=function(e,t,i){for(;d.default.element(e);){if(mt(e,t))return!0;if((e=gt(e))===i)return mt(e,t)}return!1},L.getActualElement=function(e){return e.correspondingUseElement||e},L.getScrollXY=ni,L.getElementClientRect=ii,L.getElementRect=function(e){var t=ii(e);if(!G.default.isIOS7&&t){var i=ni(o.getWindow(e));t.left+=i.x,t.right+=i.x,t.top+=i.y,t.bottom+=i.y}return t},L.getPath=function(e){for(var t=[];e;)t.push(e),e=gt(e);return t},L.trySelector=function(e){return!!d.default.string(e)&&(I.default.document.querySelector(e),!0)};var sn=function(e){return e.parentNode||e.host};function ti(e,t){for(var i,n=[],r=e;(i=sn(r))&&r!==t&&i!==r.ownerDocument;)n.unshift(r),r=i;return n}function ni(e){return{x:(e=e||o.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function ii(e){var t=e instanceof I.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(e,t){for(var i in t)e[i]=t[i];return e};var K={};function ln(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function ri(e,t,i){return e==="parent"?(0,L.parentNode)(i):e==="self"?t.getRect(i):(0,L.closest)(i,e)}Object.defineProperty(K,"__esModule",{value:!0}),K.getStringOptionResult=ri,K.resolveRectLike=function(e,t,i,n){var r,a=e;return d.default.string(a)?a=ri(a,t,i):d.default.func(a)&&(a=a.apply(void 0,function(u){if(Array.isArray(u))return ln(u)}(r=n)||function(u){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(u))return Array.from(u)}(r)||function(u,s){if(u){if(typeof u=="string")return ln(u,s);var c=Object.prototype.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?ln(u,s):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),d.default.element(a)&&(a=(0,L.getElementRect)(a)),a},K.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},K.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,D.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},K.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,D.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},K.addEdges=function(e,t,i){e.left&&(t.left+=i.x),e.right&&(t.right+=i.x),e.top&&(t.top+=i.y),e.bottom&&(t.bottom+=i.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=function(e,t,i){var n=e.options[i],r=n&&n.origin||e.options.origin,a=(0,K.resolveRectLike)(r,e,t,[e&&t]);return(0,K.rectToXY)(a)||{x:0,y:0}};var Re={};function oi(e){return e.trim().split(/ +/)}Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=function e(t,i,n){if(n=n||{},d.default.string(t)&&t.search(" ")!==-1&&(t=oi(t)),d.default.array(t))return t.reduce(function(c,p){return(0,D.default)(c,e(p,i,n))},n);if(d.default.object(t)&&(i=t,t=""),d.default.func(i))n[t]=n[t]||[],n[t].push(i);else if(d.default.array(i))for(var r=0;r<i.length;r++){var a;a=i[r],e(t,a,n)}else if(d.default.object(i))for(var u in i){var s=oi(u).map(function(c){return"".concat(t).concat(c)});e(s,i[u],n)}return n};var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.default=void 0,be.default=function(e,t){return Math.sqrt(e*e+t*t)};var Je={};function cn(e,t){for(var i in t){var n=cn.prefixedPropREs,r=!1;for(var a in n)if(i.indexOf(a)===0&&n[a].test(i)){r=!0;break}r||typeof t[i]=="function"||(e[i]=t[i])}return e}Object.defineProperty(Je,"__esModule",{value:!0}),Je.default=void 0,cn.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var Gr=cn;Je.default=Gr;var A={};function un(e){return e instanceof I.default.Event||e instanceof I.default.Touch}function Qe(e,t,i){return e=e||"page",(i=i||{}).x=t[e+"X"],i.y=t[e+"Y"],i}function ai(e,t){return t=t||{x:0,y:0},G.default.isOperaMobile&&un(e)?(Qe("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):Qe("page",e,t),t}function si(e,t){return t=t||{},G.default.isOperaMobile&&un(e)?Qe("screen",e,t):Qe("client",e,t),t}function yt(e){var t=[];return d.default.array(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function li(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},i=0;i<e.length;i++){var n=e[i];for(var r in t)t[r]+=n[r]}for(var a in t)t[a]/=e.length;return t}Object.defineProperty(A,"__esModule",{value:!0}),A.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},A.setCoordDeltas=function(e,t,i){e.page.x=i.page.x-t.page.x,e.page.y=i.page.y-t.page.y,e.client.x=i.client.x-t.client.x,e.client.y=i.client.y-t.client.y,e.timeStamp=i.timeStamp-t.timeStamp},A.setCoordVelocity=function(e,t){var i=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/i,e.page.y=t.page.y/i,e.client.x=t.client.x/i,e.client.y=t.client.y/i,e.timeStamp=i},A.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},A.isNativePointer=un,A.getXY=Qe,A.getPageXY=ai,A.getClientXY=si,A.getPointerId=function(e){return d.default.number(e.pointerId)?e.pointerId:e.identifier},A.setCoords=function(e,t,i){var n=t.length>1?li(t):t[0];ai(n,e.page),si(n,e.client),e.timeStamp=i},A.getTouchPair=yt,A.pointerAverage=li,A.touchBBox=function(e){if(!e.length)return null;var t=yt(e),i=Math.min(t[0].pageX,t[1].pageX),n=Math.min(t[0].pageY,t[1].pageY),r=Math.max(t[0].pageX,t[1].pageX),a=Math.max(t[0].pageY,t[1].pageY);return{x:i,y:n,left:i,top:n,right:r,bottom:a,width:r-i,height:a-n}},A.touchDistance=function(e,t){var i=t+"X",n=t+"Y",r=yt(e),a=r[0][i]-r[1][i],u=r[0][n]-r[1][n];return(0,be.default)(a,u)},A.touchAngle=function(e,t){var i=t+"X",n=t+"Y",r=yt(e),a=r[1][i]-r[0][i],u=r[1][n]-r[0][n];return 180*Math.atan2(u,a)/Math.PI},A.getPointerType=function(e){return d.default.string(e.pointerType)?e.pointerType:d.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof I.default.Touch?"touch":"mouse"},A.getEventTargets=function(e){var t=d.default.func(e.composedPath)?e.composedPath():e.path;return[L.getActualElement(t?t[0]:e.target),L.getActualElement(e.currentTarget)]},A.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},A.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(A,"pointerExtend",{enumerable:!0,get:function(){return Je.default}});var He={};function Kr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(He,"__esModule",{value:!0}),He.BaseEvent=void 0;var ci=function(){function e(n){(function(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")})(this,e),this.type=void 0,this.target=void 0,this.currentTarget=void 0,this.interactable=void 0,this._interaction=void 0,this.timeStamp=void 0,this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=n}var t,i;return t=e,(i=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&Kr(t.prototype,i),e}();He.BaseEvent=ci,Object.defineProperty(ci.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var $={};Object.defineProperty($,"__esModule",{value:!0}),$.find=$.findIndex=$.from=$.merge=$.remove=$.contains=void 0,$.contains=function(e,t){return e.indexOf(t)!==-1},$.remove=function(e,t){return e.splice(e.indexOf(t),1)};var ui=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];e.push(n)}return e};$.merge=ui,$.from=function(e){return ui([],e)};var di=function(e,t){for(var i=0;i<e.length;i++)if(t(e[i],i,e))return i;return-1};$.findIndex=di,$.find=function(e,t){return e[di(e,t)]};var he={};function pi(e){return(pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Zr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fi(e,t){return(fi=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i})(e,t)}function Jr(e,t){return!t||pi(t)!=="object"&&typeof t!="function"?function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(he,"__esModule",{value:!0}),he.DropEvent=void 0;var Qr=function(e){(function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),c&&fi(s,c)})(u,e);var t,i,n,r,a=(n=u,r=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}(),function(){var s,c=dn(n);if(r){var p=dn(this).constructor;s=Reflect.construct(c,arguments,p)}else s=c.apply(this,arguments);return Jr(this,s)});function u(s,c,p){var v;(function(y,k){if(!(y instanceof k))throw new TypeError("Cannot call a class as a function")})(this,u),(v=a.call(this,c._interaction)).target=void 0,v.dropzone=void 0,v.dragEvent=void 0,v.relatedTarget=void 0,v.draggable=void 0,v.timeStamp=void 0,v.propagationStopped=!1,v.immediatePropagationStopped=!1;var m=p==="dragleave"?s.prev:s.cur,b=m.element,E=m.dropzone;return v.type=p,v.target=b,v.currentTarget=b,v.dropzone=E,v.dragEvent=c,v.relatedTarget=c.target,v.draggable=c.interactable,v.timeStamp=c.timeStamp,v}return t=u,(i=[{key:"reject",value:function(){var s=this,c=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&c.cur.dropzone===this.dropzone&&c.cur.element===this.target)if(c.prev.dropzone=this.dropzone,c.prev.element=this.target,c.rejected=!0,c.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var p=c.activeDrops,v=$.findIndex(p,function(b){var E=b.dropzone,y=b.element;return E===s.dropzone&&y===s.target});c.activeDrops.splice(v,1);var m=new u(c,this.dragEvent,"dropdeactivate");m.dropzone=this.dropzone,m.target=this.target,this.dropzone.fire(m)}else this.dropzone.fire(new u(c,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&Zr(t.prototype,i),u}(He.BaseEvent);he.DropEvent=Qr;var bt={};function hi(e,t){for(var i=0;i<e.slice().length;i++){var n=e.slice()[i],r=n.dropzone,a=n.element;t.dropzone=r,t.target=a,r.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function pn(e,t){for(var i=function(a,u){for(var s=a.interactables,c=[],p=0;p<s.list.length;p++){var v=s.list[p];if(v.options.drop.enabled){var m=v.options.drop.accept;if(!(d.default.element(m)&&m!==u||d.default.string(m)&&!L.matchesSelector(u,m)||d.default.func(m)&&!m({dropzone:v,draggableElement:u})))for(var b=d.default.string(v.target)?v._context.querySelectorAll(v.target):d.default.array(v.target)?v.target:[v.target],E=0;E<b.length;E++){var y=b[E];y!==u&&c.push({dropzone:v,element:y,rect:v.getRect(y)})}}}return c}(e,t),n=0;n<i.length;n++){var r=i[n];r.rect=r.dropzone.getRect(r.element)}return i}function vi(e,t,i){for(var n=e.dropState,r=e.interactable,a=e.element,u=[],s=0;s<n.activeDrops.length;s++){var c=n.activeDrops[s],p=c.dropzone,v=c.element,m=c.rect;u.push(p.dropCheck(t,i,r,a,v,m)?v:null)}var b=L.indexOfDeepestElement(u);return n.activeDrops[b]||null}function fn(e,t,i){var n=e.dropState,r={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return i.type==="dragstart"&&(r.activate=new he.DropEvent(n,i,"dropactivate"),r.activate.target=null,r.activate.dropzone=null),i.type==="dragend"&&(r.deactivate=new he.DropEvent(n,i,"dropdeactivate"),r.deactivate.target=null,r.deactivate.dropzone=null),n.rejected||(n.cur.element!==n.prev.element&&(n.prev.dropzone&&(r.leave=new he.DropEvent(n,i,"dragleave"),i.dragLeave=r.leave.target=n.prev.element,i.prevDropzone=r.leave.dropzone=n.prev.dropzone),n.cur.dropzone&&(r.enter=new he.DropEvent(n,i,"dragenter"),i.dragEnter=n.cur.element,i.dropzone=n.cur.dropzone)),i.type==="dragend"&&n.cur.dropzone&&(r.drop=new he.DropEvent(n,i,"drop"),i.dropzone=n.cur.dropzone,i.relatedTarget=n.cur.element),i.type==="dragmove"&&n.cur.dropzone&&(r.move=new he.DropEvent(n,i,"dropmove"),r.move.dragmove=i,i.dropzone=n.cur.dropzone)),r}function hn(e,t){var i=e.dropState,n=i.activeDrops,r=i.cur,a=i.prev;t.leave&&a.dropzone.fire(t.leave),t.enter&&r.dropzone.fire(t.enter),t.move&&r.dropzone.fire(t.move),t.drop&&r.dropzone.fire(t.drop),t.deactivate&&hi(n,t.deactivate),i.prev.dropzone=r.dropzone,i.prev.element=r.element}function gi(e,t){var i=e.interaction,n=e.iEvent,r=e.event;if(n.type==="dragmove"||n.type==="dragend"){var a=i.dropState;t.dynamicDrop&&(a.activeDrops=pn(t,i.element));var u=n,s=vi(i,u,r);a.rejected=a.rejected&&!!s&&s.dropzone===a.cur.dropzone&&s.element===a.cur.element,a.cur.dropzone=s&&s.dropzone,a.cur.element=s&&s.element,a.events=fn(i,0,u)}}Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=void 0;var mi={id:"actions/drop",install:function(e){var t=e.actions,i=e.interactStatic,n=e.Interactable,r=e.defaults;e.usePlugin(T.default),n.prototype.dropzone=function(a){return function(u,s){if(d.default.object(s)){if(u.options.drop.enabled=s.enabled!==!1,s.listeners){var c=(0,Re.default)(s.listeners),p=Object.keys(c).reduce(function(v,m){return v[/^(enter|leave)/.test(m)?"drag".concat(m):/^(activate|deactivate|move)/.test(m)?"drop".concat(m):m]=c[m],v},{});u.off(u.options.drop.listeners),u.on(p),u.options.drop.listeners=p}return d.default.func(s.ondrop)&&u.on("drop",s.ondrop),d.default.func(s.ondropactivate)&&u.on("dropactivate",s.ondropactivate),d.default.func(s.ondropdeactivate)&&u.on("dropdeactivate",s.ondropdeactivate),d.default.func(s.ondragenter)&&u.on("dragenter",s.ondragenter),d.default.func(s.ondragleave)&&u.on("dragleave",s.ondragleave),d.default.func(s.ondropmove)&&u.on("dropmove",s.ondropmove),/^(pointer|center)$/.test(s.overlap)?u.options.drop.overlap=s.overlap:d.default.number(s.overlap)&&(u.options.drop.overlap=Math.max(Math.min(1,s.overlap),0)),"accept"in s&&(u.options.drop.accept=s.accept),"checker"in s&&(u.options.drop.checker=s.checker),u}return d.default.bool(s)?(u.options.drop.enabled=s,u):u.options.drop}(this,a)},n.prototype.dropCheck=function(a,u,s,c,p,v){return function(m,b,E,y,k,M,P){var C=!1;if(!(P=P||m.getRect(M)))return!!m.options.drop.checker&&m.options.drop.checker(b,E,C,m,M,y,k);var R=m.options.drop.overlap;if(R==="pointer"){var N=(0,Oe.default)(y,k,"drag"),X=A.getPageXY(b);X.x+=N.x,X.y+=N.y;var Z=X.x>P.left&&X.x<P.right,q=X.y>P.top&&X.y<P.bottom;C=Z&&q}var Y=y.getRect(k);if(Y&&R==="center"){var ue=Y.left+Y.width/2,ye=Y.top+Y.height/2;C=ue>=P.left&&ue<=P.right&&ye>=P.top&&ye<=P.bottom}return Y&&d.default.number(R)&&(C=Math.max(0,Math.min(P.right,Y.right)-Math.max(P.left,Y.left))*Math.max(0,Math.min(P.bottom,Y.bottom)-Math.max(P.top,Y.top))/(Y.width*Y.height)>=R),m.options.drop.checker&&(C=m.options.drop.checker(b,E,C,m,M,y,k)),C}(this,a,u,s,c,p,v)},i.dynamicDrop=function(a){return d.default.bool(a)?(e.dynamicDrop=a,i):e.dynamicDrop},(0,D.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,r.actions.drop=mi.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;t.prepared.name==="drag"&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var i=e.interaction,n=(e.event,e.iEvent);if(i.prepared.name==="drag"){var r=i.dropState;r.activeDrops=null,r.events=null,r.activeDrops=pn(t,i.element),r.events=fn(i,0,n),r.events.activate&&(hi(r.activeDrops,r.events.activate),t.fire("actions/drop:start",{interaction:i,dragEvent:n}))}},"interactions:action-move":gi,"interactions:after-action-move":function(e,t){var i=e.interaction,n=e.iEvent;i.prepared.name==="drag"&&(hn(i,i.dropState.events),t.fire("actions/drop:move",{interaction:i,dragEvent:n}),i.dropState.events={})},"interactions:action-end":function(e,t){if(e.interaction.prepared.name==="drag"){var i=e.interaction,n=e.iEvent;gi(e,t),hn(i,i.dropState.events),t.fire("actions/drop:end",{interaction:i,dragEvent:n})}},"interactions:stop":function(e){var t=e.interaction;if(t.prepared.name==="drag"){var i=t.dropState;i&&(i.activeDrops=null,i.events=null,i.cur.dropzone=null,i.cur.element=null,i.prev.dropzone=null,i.prev.element=null,i.rejected=!1)}}},getActiveDrops:pn,getDrop:vi,getDropEvents:fn,fireDropEvents:hn,defaults:{enabled:!1,accept:null,overlap:"pointer"}},eo=mi;bt.default=eo;var wt={};function vn(e){var t=e.interaction,i=e.iEvent,n=e.phase;if(t.prepared.name==="gesture"){var r=t.pointers.map(function(p){return p.pointer}),a=n==="start",u=n==="end",s=t.interactable.options.deltaSource;if(i.touches=[r[0],r[1]],a)i.distance=A.touchDistance(r,s),i.box=A.touchBBox(r),i.scale=1,i.ds=0,i.angle=A.touchAngle(r,s),i.da=0,t.gesture.startDistance=i.distance,t.gesture.startAngle=i.angle;else if(u){var c=t.prevEvent;i.distance=c.distance,i.box=c.box,i.scale=c.scale,i.ds=0,i.angle=c.angle,i.da=0}else i.distance=A.touchDistance(r,s),i.box=A.touchBBox(r),i.scale=i.distance/t.gesture.startDistance,i.angle=A.touchAngle(r,s),i.ds=i.scale-t.gesture.scale,i.da=i.angle-t.gesture.angle;t.gesture.distance=i.distance,t.gesture.angle=i.angle,d.default.number(i.scale)&&i.scale!==1/0&&!isNaN(i.scale)&&(t.gesture.scale=i.scale)}}Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=void 0;var gn={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,i=e.Interactable,n=e.defaults;i.prototype.gesturable=function(r){return d.default.object(r)?(this.options.gesture.enabled=r.enabled!==!1,this.setPerAction("gesture",r),this.setOnEvents("gesture",r),this):d.default.bool(r)?(this.options.gesture.enabled=r,this):this.options.gesture},t.map.gesture=gn,t.methodDict.gesture="gesturable",n.actions.gesture=gn.defaults},listeners:{"interactions:action-start":vn,"interactions:action-move":vn,"interactions:action-end":vn,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},to=gn;wt.default=to;var Et={};function no(e,t,i,n,r,a,u){if(!t)return!1;if(t===!0){var s=d.default.number(a.width)?a.width:a.right-a.left,c=d.default.number(a.height)?a.height:a.bottom-a.top;if(u=Math.min(u,Math.abs((e==="left"||e==="right"?s:c)/2)),s<0&&(e==="left"?e="right":e==="right"&&(e="left")),c<0&&(e==="top"?e="bottom":e==="bottom"&&(e="top")),e==="left")return i.x<(s>=0?a.left:a.right)+u;if(e==="top")return i.y<(c>=0?a.top:a.bottom)+u;if(e==="right")return i.x>(s>=0?a.right:a.left)-u;if(e==="bottom")return i.y>(c>=0?a.bottom:a.top)-u}return!!d.default.element(n)&&(d.default.element(t)?t===n:L.matchesUpTo(n,t,r))}function yi(e){var t=e.iEvent,i=e.interaction;if(i.prepared.name==="resize"&&i.resizeAxes){var n=t;i.interactable.options.resize.square?(i.resizeAxes==="y"?n.delta.x=n.delta.y:n.delta.y=n.delta.x,n.axes="xy"):(n.axes=i.resizeAxes,i.resizeAxes==="x"?n.delta.y=0:i.resizeAxes==="y"&&(n.delta.x=0))}}Object.defineProperty(Et,"__esModule",{value:!0}),Et.default=void 0;var ve={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,i=e.browser,n=e.Interactable,r=e.defaults;ve.cursors=function(a){return a.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(i),ve.defaultMargin=i.supportsTouch||i.supportsPointerEvent?20:10,n.prototype.resizable=function(a){return function(u,s,c){return d.default.object(s)?(u.options.resize.enabled=s.enabled!==!1,u.setPerAction("resize",s),u.setOnEvents("resize",s),d.default.string(s.axis)&&/^x$|^y$|^xy$/.test(s.axis)?u.options.resize.axis=s.axis:s.axis===null&&(u.options.resize.axis=c.defaults.actions.resize.axis),d.default.bool(s.preserveAspectRatio)?u.options.resize.preserveAspectRatio=s.preserveAspectRatio:d.default.bool(s.square)&&(u.options.resize.square=s.square),u):d.default.bool(s)?(u.options.resize.enabled=s,u):u.options.resize}(this,a,e)},t.map.resize=ve,t.methodDict.resize="resizable",r.actions.resize=ve.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){(function(t){var i=t.iEvent,n=t.interaction;if(n.prepared.name==="resize"&&n.prepared.edges){var r=i,a=n.rect;n._rects={start:(0,D.default)({},a),corrected:(0,D.default)({},a),previous:(0,D.default)({},a),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}})(e),yi(e)},"interactions:action-move":function(e){(function(t){var i=t.iEvent,n=t.interaction;if(n.prepared.name==="resize"&&n.prepared.edges){var r=i,a=n.interactable.options.resize.invert,u=a==="reposition"||a==="negate",s=n.rect,c=n._rects,p=c.start,v=c.corrected,m=c.delta,b=c.previous;if((0,D.default)(b,v),u){if((0,D.default)(v,s),a==="reposition"){if(v.top>v.bottom){var E=v.top;v.top=v.bottom,v.bottom=E}if(v.left>v.right){var y=v.left;v.left=v.right,v.right=y}}}else v.top=Math.min(s.top,p.bottom),v.bottom=Math.max(s.bottom,p.top),v.left=Math.min(s.left,p.right),v.right=Math.max(s.right,p.left);for(var k in v.width=v.right-v.left,v.height=v.bottom-v.top,v)m[k]=v[k]-b[k];r.edges=n.prepared.edges,r.rect=v,r.deltaRect=m}})(e),yi(e)},"interactions:action-end":function(e){var t=e.iEvent,i=e.interaction;if(i.prepared.name==="resize"&&i.prepared.edges){var n=t;n.edges=i.prepared.edges,n.rect=i._rects.corrected,n.deltaRect=i._rects.delta}},"auto-start:check":function(e){var t=e.interaction,i=e.interactable,n=e.element,r=e.rect,a=e.buttons;if(r){var u=(0,D.default)({},t.coords.cur.page),s=i.options.resize;if(s&&s.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||(a&s.mouseButtons)!=0)){if(d.default.object(s.edges)){var c={left:!1,right:!1,top:!1,bottom:!1};for(var p in c)c[p]=no(p,s.edges[p],u,t._latestPointer.eventTarget,n,r,s.margin||ve.defaultMargin);c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,(c.left||c.right||c.top||c.bottom)&&(e.action={name:"resize",edges:c})}else{var v=s.axis!=="y"&&u.x>r.right-ve.defaultMargin,m=s.axis!=="x"&&u.y>r.bottom-ve.defaultMargin;(v||m)&&(e.action={name:"resize",axes:(v?"x":"")+(m?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,i=e.axis,n=e.name,r=ve.cursors,a=null;if(i)a=r[n+i];else if(t){for(var u="",s=["top","bottom","left","right"],c=0;c<s.length;c++){var p=s[c];t[p]&&(u+=p)}a=r[u]}return a},defaultMargin:null},io=ve;Et.default=io;var xt={};Object.defineProperty(xt,"__esModule",{value:!0}),xt.default=void 0;var ro={id:"actions",install:function(e){e.usePlugin(wt.default),e.usePlugin(Et.default),e.usePlugin(T.default),e.usePlugin(bt.default)}};xt.default=ro;var pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0;var ge,_e,bi=0,oo={request:function(e){return ge(e)},cancel:function(e){return _e(e)},init:function(e){if(ge=e.requestAnimationFrame,_e=e.cancelAnimationFrame,!ge)for(var t=["ms","moz","webkit","o"],i=0;i<t.length;i++){var n=t[i];ge=e["".concat(n,"RequestAnimationFrame")],_e=e["".concat(n,"CancelAnimationFrame")]||e["".concat(n,"CancelRequestAnimationFrame")]}ge=ge&&ge.bind(e),_e=_e&&_e.bind(e),ge||(ge=function(r){var a=Date.now(),u=Math.max(0,16-(a-bi)),s=e.setTimeout(function(){r(a+u)},u);return bi=a+u,s},_e=function(r){return clearTimeout(r)})}};pe.default=oo;var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.getContainer=St,we.getScroll=et,we.getScrollSize=function(e){return d.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},we.getScrollSizeDelta=function(e,t){var i=e.interaction,n=e.element,r=i&&i.interactable.options[i.prepared.name].autoScroll;if(!r||!r.enabled)return t(),{x:0,y:0};var a=St(r.container,i.interactable,n),u=et(a);t();var s=et(a);return{x:s.x-u.x,y:s.y-u.y}},we.default=void 0;var F={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){F.isScrolling=!0,pe.default.cancel(F.i),e.autoScroll=F,F.interaction=e,F.prevTime=F.now(),F.i=pe.default.request(F.scroll)},stop:function(){F.isScrolling=!1,F.interaction&&(F.interaction.autoScroll=null),pe.default.cancel(F.i)},scroll:function(){var e=F.interaction,t=e.interactable,i=e.element,n=e.prepared.name,r=t.options[n].autoScroll,a=St(r.container,t,i),u=F.now(),s=(u-F.prevTime)/1e3,c=r.speed*s;if(c>=1){var p={x:F.x*c,y:F.y*c};if(p.x||p.y){var v=et(a);d.default.window(a)?a.scrollBy(p.x,p.y):a&&(a.scrollLeft+=p.x,a.scrollTop+=p.y);var m=et(a),b={x:m.x-v.x,y:m.y-v.y};(b.x||b.y)&&t.fire({type:"autoscroll",target:i,interactable:t,delta:b,interaction:e,container:a})}F.prevTime=u}F.isScrolling&&(pe.default.cancel(F.i),F.i=pe.default.request(F.scroll))},check:function(e,t){var i;return(i=e.options[t].autoScroll)==null?void 0:i.enabled},onInteractionMove:function(e){var t=e.interaction,i=e.pointer;if(t.interacting()&&F.check(t.interactable,t.prepared.name))if(t.simulation)F.x=F.y=0;else{var n,r,a,u,s=t.interactable,c=t.element,p=t.prepared.name,v=s.options[p].autoScroll,m=St(v.container,s,c);if(d.default.window(m))u=i.clientX<F.margin,n=i.clientY<F.margin,r=i.clientX>m.innerWidth-F.margin,a=i.clientY>m.innerHeight-F.margin;else{var b=L.getElementClientRect(m);u=i.clientX<b.left+F.margin,n=i.clientY<b.top+F.margin,r=i.clientX>b.right-F.margin,a=i.clientY>b.bottom-F.margin}F.x=r?1:u?-1:0,F.y=a?1:n?-1:0,F.isScrolling||(F.margin=v.margin,F.speed=v.speed,F.start(t))}}};function St(e,t,i){return(d.default.string(e)?(0,K.getStringOptionResult)(e,t,i):e)||(0,o.getWindow)(i)}function et(e){return d.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var ao={id:"auto-scroll",install:function(e){var t=e.defaults,i=e.actions;e.autoScroll=F,F.now=function(){return e.now()},i.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=F.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,F.stop(),F.interaction&&(F.interaction=null)},"interactions:stop":F.stop,"interactions:action-move":function(e){return F.onInteractionMove(e)}}};we.default=ao;var se={};Object.defineProperty(se,"__esModule",{value:!0}),se.warnOnce=function(e,t){var i=!1;return function(){return i||(o.window.console.warn(t),i=!0),e.apply(this,arguments)}},se.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},se.sign=void 0,se.sign=function(e){return e>=0?1:-1};var Pt={};function so(e){return d.default.bool(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor}function lo(e){return d.default.func(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=void 0;var co={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(i,n,r,a){var u=function(s,c,p,v,m){var b=s.getRect(v),E={action:null,interactable:s,interaction:p,element:v,rect:b,buttons:c.buttons||{0:1,1:4,3:8,4:16}[c.button]};return m.fire("auto-start:check",E),E.action}(this,n,r,a,e);return this.options.actionChecker?this.options.actionChecker(i,n,u,this,a,r):u},t.prototype.ignoreFrom=(0,se.warnOnce)(function(i){return this._backCompatOption("ignoreFrom",i)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,se.warnOnce)(function(i){return this._backCompatOption("allowFrom",i)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=lo,t.prototype.styleCursor=so}};Pt.default=co;var ze={};function wi(e,t,i,n,r){return t.testIgnoreAllow(t.options[e.name],i,n)&&t.options[e.name].enabled&&kt(t,i,e,r)?e:null}function uo(e,t,i,n,r,a,u){for(var s=0,c=n.length;s<c;s++){var p=n[s],v=r[s],m=p.getAction(t,i,e,v);if(m){var b=wi(m,p,v,a,u);if(b)return{action:b,interactable:p,element:v}}}return{action:null,interactable:null,element:null}}function Ei(e,t,i,n,r){var a=[],u=[],s=n;function c(v){a.push(v),u.push(s)}for(;d.default.element(s);){a=[],u=[],r.interactables.forEachMatch(s,c);var p=uo(e,t,i,a,u,n,r);if(p.action&&!p.interactable.options[p.action.name].manualStart)return p;s=L.parentNode(s)}return{action:null,interactable:null,element:null}}function xi(e,t,i){var n=t.action,r=t.interactable,a=t.element;n=n||{name:null},e.interactable=r,e.element=a,(0,se.copyAction)(e.prepared,n),e.rect=r&&n.name?r.getRect(a):null,Pi(e,i),i.fire("autoStart:prepared",{interaction:e})}function kt(e,t,i,n){var r=e.options,a=r[i.name].max,u=r[i.name].maxPerElement,s=n.autoStart.maxInteractions,c=0,p=0,v=0;if(!(a&&u&&s))return!1;for(var m=0;m<n.interactions.list.length;m++){var b=n.interactions.list[m],E=b.prepared.name;if(b.interacting()&&(++c>=s||b.interactable===e&&((p+=E===i.name?1:0)>=a||b.element===t&&(v++,E===i.name&&v>=u))))return!1}return s>0}function Si(e,t){return d.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function mn(e,t,i){var n=i.autoStart.cursorElement;n&&n!==e&&(n.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,i.autoStart.cursorElement=t?e:null}function Pi(e,t){var i=e.interactable,n=e.element,r=e.prepared;if(e.pointerType==="mouse"&&i&&i.options.styleCursor){var a="";if(r.name){var u=i.options[r.name].cursorChecker;a=d.default.func(u)?u(r,i,n,e._interacting):t.actions.map[r.name].getCursor(r)}mn(e.element,a||"",t)}else t.autoStart.cursorElement&&mn(t.autoStart.cursorElement,"",t)}Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=void 0;var po={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,i=e.defaults;e.usePlugin(Pt.default),i.base.actionChecker=null,i.base.styleCursor=!0,(0,D.default)(i.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(n){return Si(n,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:kt,cursorElement:null}},listeners:{"interactions:down":function(e,t){var i=e.interaction,n=e.pointer,r=e.event,a=e.eventTarget;i.interacting()||xi(i,Ei(i,n,r,a,t),t)},"interactions:move":function(e,t){(function(i,n){var r=i.interaction,a=i.pointer,u=i.event,s=i.eventTarget;r.pointerType!=="mouse"||r.pointerIsDown||r.interacting()||xi(r,Ei(r,a,u,s,n),n)})(e,t),function(i,n){var r=i.interaction;if(r.pointerIsDown&&!r.interacting()&&r.pointerWasMoved&&r.prepared.name){n.fire("autoStart:before-start",i);var a=r.interactable,u=r.prepared.name;u&&a&&(a.options[u].manualStart||!kt(a,r.element,r.prepared,n)?r.stop():(r.start(r.prepared,a,r.element),Pi(r,n)))}}(e,t)},"interactions:stop":function(e,t){var i=e.interaction,n=i.interactable;n&&n.options.styleCursor&&mn(i.element,"",t)}},maxInteractions:Si,withinInteractionLimit:kt,validateAction:wi};ze.default=po;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=void 0;var fo={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var i=e.interaction,n=e.eventTarget,r=e.dx,a=e.dy;if(i.prepared.name==="drag"){var u=Math.abs(r),s=Math.abs(a),c=i.interactable.options.drag,p=c.startAxis,v=u>s?"x":u<s?"y":"xy";if(i.prepared.axis=c.lockAxis==="start"?v[0]:c.lockAxis,v!=="xy"&&p!=="xy"&&p!==v){i.prepared.name=null;for(var m=n,b=function(y){if(y!==i.interactable){var k=i.interactable.options.drag;if(!k.manualStart&&y.testIgnoreAllow(k,m,n)){var M=y.getAction(i.downPointer,i.downEvent,i,m);if(M&&M.name==="drag"&&function(P,C){if(!C)return!1;var R=C.options.drag.startAxis;return P==="xy"||R==="xy"||R===P}(v,y)&&ze.default.validateAction(M,y,m,n,t))return y}}};d.default.element(m);){var E=t.interactables.forEachMatch(m,b);if(E){i.prepared.name="drag",i.interactable=E,i.element=m;break}m=(0,L.parentNode)(m)}}}}}};Ot.default=fo;var _t={};function yn(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var i=e.interactable.options;return i[t].hold||i[t].delay}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=void 0;var ho={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(ze.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,i=yn(t);i>0&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},i))},"interactions:move":function(e){var t=e.interaction,i=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!i&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;yn(t)>0&&(t.prepared.name=null)}},getHoldDuration:yn};_t.default=ho;var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.default=void 0;var vo={id:"auto-start",install:function(e){e.usePlugin(ze.default),e.usePlugin(_t.default),e.usePlugin(Ot.default)}};Tt.default=vo;var Fe={};function go(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):d.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function mo(e){var t=e.interaction,i=e.event;t.interactable&&t.interactable.checkAndPreventDefault(i)}function ki(e){var t=e.Interactable;t.prototype.preventDefault=go,t.prototype.checkAndPreventDefault=function(i){return function(n,r,a){var u=n.options.preventDefault;if(u!=="never")if(u!=="always"){if(r.events.supportsPassive&&/^touch(start|move)$/.test(a.type)){var s=(0,o.getWindow)(a.target).document,c=r.getDocOptions(s);if(!c||!c.events||c.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(a.type)||d.default.element(a.target)&&(0,L.matchesSelector)(a.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||a.preventDefault()}else a.preventDefault()}(this,e,i)},e.interactions.docEvents.push({type:"dragstart",listener:function(i){for(var n=0;n<e.interactions.list.length;n++){var r=e.interactions.list[n];if(r.element&&(r.element===i.target||(0,L.nodeContains)(r.element,i.target)))return void r.interactable.checkAndPreventDefault(i)}}})}Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.install=ki,Fe.default=void 0;var yo={id:"core/interactablePreventDefault",install:ki,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=mo,e},{})};Fe.default=yo;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.default=void 0,Mt.default={};var We,Ct={};function bn(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.default=void 0,function(e){e.touchAction="touchAction",e.boxSizing="boxSizing",e.noListeners="noListeners"}(We||(We={}));var Oi="[interact.js] ",wn={touchAction:"https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action",boxSizing:"https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing"},En=[{name:We.touchAction,perform:function(e){return!function(t,i,n){for(var r=t;d.default.element(r);){if(_i(r,"touchAction",n))return!0;r=(0,L.parentNode)(r)}return!1}(e.element,0,/pan-|pinch|none/)},getInfo:function(e){return[e.element,wn.touchAction]},text:`Consider adding CSS "touch-action: none" to this element
`},{name:We.boxSizing,perform:function(e){var t=e.element;return e.prepared.name==="resize"&&t instanceof I.default.HTMLElement&&!_i(t,"boxSizing",/border-box/)},text:'Consider adding CSS "box-sizing: border-box" to this resizable element',getInfo:function(e){return[e.element,wn.boxSizing]}},{name:We.noListeners,perform:function(e){var t=e.prepared.name;return!(e.interactable.events.types["".concat(t,"move")]||[]).length},getInfo:function(e){return[e.prepared.name,e.interactable]},text:"There are no listeners set for this action"}];function _i(e,t,i){var n=e.style[t]||o.window.getComputedStyle(e)[t];return i.test((n||"").toString())}var bo={id:"dev-tools",install:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.logger,n=e.Interactable,r=e.defaults;e.logger=i||console,r.base.devTools={ignore:{}},n.prototype.devTools=function(a){return a?((0,D.default)(this.options.devTools,a),this):this.options.devTools},e.usePlugin(Mt.default)},listeners:{"interactions:action-start":function(e,t){for(var i=e.interaction,n=0;n<En.length;n++){var r,a=En[n],u=i.interactable&&i.interactable.options;u&&u.devTools&&u.devTools.ignore[a.name]||!a.perform(i)||(r=t.logger).warn.apply(r,[Oi+a.text].concat(function(c){if(Array.isArray(c))return bn(c)}(s=a.getInfo(i))||function(c){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(c))return Array.from(c)}(s)||function(c,p){if(c){if(typeof c=="string")return bn(c,p);var v=Object.prototype.toString.call(c).slice(8,-1);return v==="Object"&&c.constructor&&(v=c.constructor.name),v==="Map"||v==="Set"?Array.from(c):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?bn(c,p):void 0}}(s)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()))}var s}},checks:En,CheckName:We,links:wn,prefix:Oi};Ct.default=bo;var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=function e(t){var i={};for(var n in t){var r=t[n];d.default.plainObject(r)?i[n]=e(r):d.default.array(r)?i[n]=$.from(r):i[n]=r}return i};var Me={};function Ti(e,t){return function(i){if(Array.isArray(i))return i}(e)||function(i,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i)){var r=[],a=!0,u=!1,s=void 0;try{for(var c,p=i[Symbol.iterator]();!(a=(c=p.next()).done)&&(r.push(c.value),!n||r.length!==n);a=!0);}catch(v){u=!0,s=v}finally{try{a||p.return==null||p.return()}finally{if(u)throw s}}return r}}(e,t)||function(i,n){if(i){if(typeof i=="string")return Mi(i,n);var r=Object.prototype.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mi(i,n):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mi(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function wo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(Me,"__esModule",{value:!0}),Me.getRectOffset=Ci,Me.default=void 0;var Eo=function(){function e(n){(function(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")})(this,e),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=n,this.result=At()}var t,i;return t=e,(i=[{key:"start",value:function(n,r){var a=n.phase,u=this.interaction,s=function(p){var v=p.interactable.options[p.prepared.name],m=v.modifiers;return m&&m.length?m:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(b){var E=v[b];return E&&E.enabled&&{options:E,methods:E._methods}}).filter(function(b){return!!b})}(u);this.prepareStates(s),this.edges=(0,D.default)({},u.edges),this.startOffset=Ci(u.rect,r),this.startDelta={x:0,y:0};var c=this.fillArg({phase:a,pageCoords:r,preEnd:!1});return this.result=At(),this.startAll(c),this.result=this.setAll(c)}},{key:"fillArg",value:function(n){var r=this.interaction;return n.interaction=r,n.interactable=r.interactable,n.element=r.element,n.rect=n.rect||r.rect,n.edges=this.edges,n.startOffset=this.startOffset,n}},{key:"startAll",value:function(n){for(var r=0;r<this.states.length;r++){var a=this.states[r];a.methods.start&&(n.state=a,a.methods.start(n))}}},{key:"setAll",value:function(n){var r=n.phase,a=n.preEnd,u=n.skipModifiers,s=n.rect;n.coords=(0,D.default)({},n.pageCoords),n.rect=(0,D.default)({},s);for(var c=u?this.states.slice(u):this.states,p=At(n.coords,n.rect),v=0;v<c.length;v++){var m,b=c[v],E=b.options,y=(0,D.default)({},n.coords),k=null;(m=b.methods)!=null&&m.set&&this.shouldDo(E,a,r)&&(n.state=b,k=b.methods.set(n),K.addEdges(this.interaction.edges,n.rect,{x:n.coords.x-y.x,y:n.coords.y-y.y})),p.eventProps.push(k)}p.delta.x=n.coords.x-n.pageCoords.x,p.delta.y=n.coords.y-n.pageCoords.y,p.rectDelta.left=n.rect.left-s.left,p.rectDelta.right=n.rect.right-s.right,p.rectDelta.top=n.rect.top-s.top,p.rectDelta.bottom=n.rect.bottom-s.bottom;var M=this.result.coords,P=this.result.rect;if(M&&P){var C=p.rect.left!==P.left||p.rect.right!==P.right||p.rect.top!==P.top||p.rect.bottom!==P.bottom;p.changed=C||M.x!==p.coords.x||M.y!==p.coords.y}return p}},{key:"applyToInteraction",value:function(n){var r=this.interaction,a=n.phase,u=r.coords.cur,s=r.coords.start,c=this.result,p=this.startDelta,v=c.delta;a==="start"&&(0,D.default)(this.startDelta,c.delta);for(var m=[[s,p],[u,v]],b=0;b<m.length;b++){var E=Ti(m[b],2),y=E[0],k=E[1];y.page.x+=k.x,y.page.y+=k.y,y.client.x+=k.x,y.client.y+=k.y}var M=this.result.rectDelta,P=n.rect||r.rect;P.left+=M.left,P.right+=M.right,P.top+=M.top,P.bottom+=M.bottom,P.width=P.right-P.left,P.height=P.bottom-P.top}},{key:"setAndApply",value:function(n){var r=this.interaction,a=n.phase,u=n.preEnd,s=n.skipModifiers,c=this.setAll(this.fillArg({preEnd:u,phase:a,pageCoords:n.modifiedCoords||r.coords.cur.page}));if(this.result=c,!c.changed&&(!s||s<this.states.length)&&r.interacting())return!1;if(n.modifiedCoords){var p=r.coords.cur.page,v={x:n.modifiedCoords.x-p.x,y:n.modifiedCoords.y-p.y};c.coords.x+=v.x,c.coords.y+=v.y,c.delta.x+=v.x,c.delta.y+=v.y}this.applyToInteraction(n)}},{key:"beforeEnd",value:function(n){var r=n.interaction,a=n.event,u=this.states;if(u&&u.length){for(var s=!1,c=0;c<u.length;c++){var p=u[c];n.state=p;var v=p.options,m=p.methods,b=m.beforeEnd&&m.beforeEnd(n);if(b)return this.endResult=b,!1;s=s||!s&&this.shouldDo(v,!0,n.phase,!0)}s&&r.move({event:a,preEnd:!0})}}},{key:"stop",value:function(n){var r=n.interaction;if(this.states&&this.states.length){var a=(0,D.default)({states:this.states,interactable:r.interactable,element:r.element,rect:null},n);this.fillArg(a);for(var u=0;u<this.states.length;u++){var s=this.states[u];a.state=s,s.methods.stop&&s.methods.stop(a)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(n){this.states=[];for(var r=0;r<n.length;r++){var a=n[r],u=a.options,s=a.methods,c=a.name;this.states.push({options:u,methods:s,index:r,name:c})}return this.states}},{key:"restoreInteractionCoords",value:function(n){var r=n.interaction,a=r.coords,u=r.rect,s=r.modification;if(s.result){for(var c=s.startDelta,p=s.result,v=p.delta,m=p.rectDelta,b=[[a.start,c],[a.cur,v]],E=0;E<b.length;E++){var y=Ti(b[E],2),k=y[0],M=y[1];k.page.x-=M.x,k.page.y-=M.y,k.client.x-=M.x,k.client.y-=M.y}u.left-=m.left,u.right-=m.right,u.top-=m.top,u.bottom-=m.bottom}}},{key:"shouldDo",value:function(n,r,a,u){return!(!n||n.enabled===!1||u&&!n.endOnly||n.endOnly&&!r||a==="start"&&!n.setStart)}},{key:"copyFrom",value:function(n){this.startOffset=n.startOffset,this.startDelta=n.startDelta,this.edges=n.edges,this.states=n.states.map(function(r){return(0,Te.default)(r)}),this.result=At((0,D.default)({},n.result.coords),(0,D.default)({},n.result.rect))}},{key:"destroy",value:function(){for(var n in this)this[n]=null}}])&&wo(t.prototype,i),e}();function At(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Ci(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}Me.default=Eo;var ne={};function Dt(e){var t=e.iEvent,i=e.interaction.modification.result;i&&(t.modifiers=i.eventProps)}Object.defineProperty(ne,"__esModule",{value:!0}),ne.makeModifier=function(e,t){var i=e.defaults,n={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},r=function(a){var u=a||{};for(var s in u.enabled=u.enabled!==!1,i)s in u||(u[s]=i[s]);var c={options:u,methods:n,name:t,enable:function(){return u.enabled=!0,c},disable:function(){return u.enabled=!1,c}};return c};return t&&typeof t=="string"&&(r._defaults=i,r._methods=n),r},ne.addEventModifiers=Dt,ne.default=void 0;var xo={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new Me.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":Dt,"interactions:action-move":Dt,"interactions:action-end":Dt,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}};ne.default=xo;var tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.defaults=void 0,tt.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var nt={};function Ai(e){return(Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function So(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Di(e,t){return(Di=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i})(e,t)}function Po(e,t){return!t||Ai(t)!=="object"&&typeof t!="function"?Li(e):t}function Li(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(nt,"__esModule",{value:!0}),nt.InteractEvent=void 0;var Ii=function(e){(function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),c&&Di(s,c)})(u,e);var t,i,n,r,a=(n=u,r=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}(),function(){var s,c=xn(n);if(r){var p=xn(this).constructor;s=Reflect.construct(c,arguments,p)}else s=c.apply(this,arguments);return Po(this,s)});function u(s,c,p,v,m,b,E){var y;(function(Z,q){if(!(Z instanceof q))throw new TypeError("Cannot call a class as a function")})(this,u),(y=a.call(this,s)).target=void 0,y.currentTarget=void 0,y.relatedTarget=null,y.screenX=void 0,y.screenY=void 0,y.button=void 0,y.buttons=void 0,y.ctrlKey=void 0,y.shiftKey=void 0,y.altKey=void 0,y.metaKey=void 0,y.page=void 0,y.client=void 0,y.delta=void 0,y.rect=void 0,y.x0=void 0,y.y0=void 0,y.t0=void 0,y.dt=void 0,y.duration=void 0,y.clientX0=void 0,y.clientY0=void 0,y.velocity=void 0,y.speed=void 0,y.swipe=void 0,y.timeStamp=void 0,y.axes=void 0,y.preEnd=void 0,m=m||s.element;var k=s.interactable,M=(k&&k.options||tt.defaults).deltaSource,P=(0,Oe.default)(k,m,p),C=v==="start",R=v==="end",N=C?Li(y):s.prevEvent,X=C?s.coords.start:R?{page:N.page,client:N.client,timeStamp:s.coords.cur.timeStamp}:s.coords.cur;return y.page=(0,D.default)({},X.page),y.client=(0,D.default)({},X.client),y.rect=(0,D.default)({},s.rect),y.timeStamp=X.timeStamp,R||(y.page.x-=P.x,y.page.y-=P.y,y.client.x-=P.x,y.client.y-=P.y),y.ctrlKey=c.ctrlKey,y.altKey=c.altKey,y.shiftKey=c.shiftKey,y.metaKey=c.metaKey,y.button=c.button,y.buttons=c.buttons,y.target=m,y.currentTarget=m,y.preEnd=b,y.type=E||p+(v||""),y.interactable=k,y.t0=C?s.pointers[s.pointers.length-1].downTime:N.t0,y.x0=s.coords.start.page.x-P.x,y.y0=s.coords.start.page.y-P.y,y.clientX0=s.coords.start.client.x-P.x,y.clientY0=s.coords.start.client.y-P.y,y.delta=C||R?{x:0,y:0}:{x:y[M].x-N[M].x,y:y[M].y-N[M].y},y.dt=s.coords.delta.timeStamp,y.duration=y.timeStamp-y.t0,y.velocity=(0,D.default)({},s.coords.velocity[M]),y.speed=(0,be.default)(y.velocity.x,y.velocity.y),y.swipe=R||v==="inertiastart"?y.getSwipe():null,y}return t=u,(i=[{key:"getSwipe",value:function(){var s=this._interaction;if(s.prevEvent.speed<600||this.timeStamp-s.prevEvent.timeStamp>150)return null;var c=180*Math.atan2(s.prevEvent.velocityY,s.prevEvent.velocityX)/Math.PI;c<0&&(c+=360);var p=112.5<=c&&c<247.5,v=202.5<=c&&c<337.5;return{up:v,down:!v&&22.5<=c&&c<157.5,left:p,right:!p&&(292.5<=c||c<67.5),angle:c,speed:s.prevEvent.speed,velocity:{x:s.prevEvent.velocityX,y:s.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&So(t.prototype,i),u}(He.BaseEvent);nt.InteractEvent=Ii,Object.defineProperties(Ii.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var it={};Object.defineProperty(it,"__esModule",{value:!0}),it.PointerInfo=void 0,it.PointerInfo=function e(t,i,n,r,a){(function(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=t,this.pointer=i,this.event=n,this.downTime=r,this.downTarget=a};var Lt,It,oe={};function ko(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(oe,"__esModule",{value:!0}),Object.defineProperty(oe,"PointerInfo",{enumerable:!0,get:function(){return it.PointerInfo}}),oe.default=oe.Interaction=oe._ProxyMethods=oe._ProxyValues=void 0,oe._ProxyValues=Lt,function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""}(Lt||(oe._ProxyValues=Lt={})),oe._ProxyMethods=It,function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""}(It||(oe._ProxyMethods=It={}));var Oo=0,ji=function(){function e(n){var r=this,a=n.pointerType,u=n.scopeFire;(function(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")})(this,e),this.interactable=null,this.element=null,this.rect=void 0,this._rects=void 0,this.edges=void 0,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=null,this.simulation=null,this.doMove=(0,se.warnOnce)(function(b){this.move(b)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:A.newCoords(),prev:A.newCoords(),cur:A.newCoords(),delta:A.newCoords(),velocity:A.newCoords()},this._id=Oo++,this._scopeFire=u,this.pointerType=a;var s=this;this._proxy={};var c=function(b){Object.defineProperty(r._proxy,b,{get:function(){return s[b]}})};for(var p in Lt)c(p);var v=function(b){Object.defineProperty(r._proxy,b,{value:function(){return s[b].apply(s,arguments)}})};for(var m in It)v(m);this._scopeFire("interactions:new",{interaction:this})}var t,i;return t=e,(i=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(n,r,a){var u=this.updatePointer(n,r,a,!0),s=this.pointers[u];this._scopeFire("interactions:down",{pointer:n,event:r,eventTarget:a,pointerIndex:u,pointerInfo:s,type:"down",interaction:this})}},{key:"start",value:function(n,r,a){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(n.name==="gesture"?2:1)||!r.options[n.name].enabled)&&((0,se.copyAction)(this.prepared,n),this.interactable=r,this.element=a,this.rect=r.getRect(a),this.edges=this.prepared.edges?(0,D.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(n,r,a){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(n,r,a,!1);var u,s,c=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(u=this.coords.cur.client.x-this.coords.start.client.x,s=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,be.default)(u,s)>this.pointerMoveTolerance);var p=this.getPointerIndex(n),v={pointer:n,pointerIndex:p,pointerInfo:this.pointers[p],event:r,type:"move",eventTarget:a,dx:u,dy:s,duplicate:c,interaction:this};c||A.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",v),c||this.simulation||(this.interacting()&&(v.type=null,this.move(v)),this.pointerWasMoved&&A.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(n){n&&n.event||A.setZeroCoords(this.coords.delta),(n=(0,D.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},n||{})).phase="move",this._doPhase(n)}},{key:"pointerUp",value:function(n,r,a,u){var s=this.getPointerIndex(n);s===-1&&(s=this.updatePointer(n,r,a,!1));var c=/cancel$/i.test(r.type)?"cancel":"up";this._scopeFire("interactions:".concat(c),{pointer:n,pointerIndex:s,pointerInfo:this.pointers[s],event:r,eventTarget:a,type:c,curEventTarget:u,interaction:this}),this.simulation||this.end(r),this.removePointer(n,r)}},{key:"documentBlur",value:function(n){this.end(n),this._scopeFire("interactions:blur",{event:n,type:"blur",interaction:this})}},{key:"end",value:function(n){var r;this._ending=!0,n=n||this._latestPointer.event,this.interacting()&&(r=this._doPhase({event:n,interaction:this,phase:"end"})),this._ending=!1,r===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(n){var r=A.getPointerId(n);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:$.findIndex(this.pointers,function(a){return a.id===r})}},{key:"getPointerInfo",value:function(n){return this.pointers[this.getPointerIndex(n)]}},{key:"updatePointer",value:function(n,r,a,u){var s=A.getPointerId(n),c=this.getPointerIndex(n),p=this.pointers[c];return u=u!==!1&&(u||/(down|start)$/i.test(r.type)),p?p.pointer=n:(p=new it.PointerInfo(s,n,r,null,null),c=this.pointers.length,this.pointers.push(p)),A.setCoords(this.coords.cur,this.pointers.map(function(v){return v.pointer}),this._now()),A.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),u&&(this.pointerIsDown=!0,p.downTime=this.coords.cur.timeStamp,p.downTarget=a,A.pointerExtend(this.downPointer,n),this.interacting()||(A.copyCoords(this.coords.start,this.coords.cur),A.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=r,this.pointerWasMoved=!1)),this._updateLatestPointer(n,r,a),this._scopeFire("interactions:update-pointer",{pointer:n,event:r,eventTarget:a,down:u,pointerInfo:p,pointerIndex:c,interaction:this}),c}},{key:"removePointer",value:function(n,r){var a=this.getPointerIndex(n);if(a!==-1){var u=this.pointers[a];this._scopeFire("interactions:remove-pointer",{pointer:n,event:r,eventTarget:null,pointerIndex:a,pointerInfo:u,interaction:this}),this.pointers.splice(a,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(n,r,a){this._latestPointer.pointer=n,this._latestPointer.event=r,this._latestPointer.eventTarget=a}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(n,r,a,u){return new nt.InteractEvent(this,n,this.prepared.name,r,this.element,a,u)}},{key:"_fireEvent",value:function(n){this.interactable.fire(n),(!this.prevEvent||n.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=n)}},{key:"_doPhase",value:function(n){var r=n.event,a=n.phase,u=n.preEnd,s=n.type,c=this.rect;if(c&&a==="move"&&(K.addEdges(this.edges,c,this.coords.delta[this.interactable.options.deltaSource]),c.width=c.right-c.left,c.height=c.bottom-c.top),this._scopeFire("interactions:before-action-".concat(a),n)===!1)return!1;var p=n.iEvent=this._createPreparedEvent(r,a,u,s);return this._scopeFire("interactions:action-".concat(a),n),a==="start"&&(this.prevEvent=p),this._fireEvent(p),this._scopeFire("interactions:after-action-".concat(a),n),!0}},{key:"_now",value:function(){return Date.now()}}])&&ko(t.prototype,i),e}();oe.Interaction=ji;var _o=ji;oe.default=_o;var Ce={};function Ri(e){e.pointerIsDown&&(Pn(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function Hi(e){Sn(e.interaction)}function Sn(e){if(!function(i){return!(!i.offset.pending.x&&!i.offset.pending.y)}(e))return!1;var t=e.offset.pending;return Pn(e.coords.cur,t),Pn(e.coords.delta,t),K.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function To(e){var t=e.x,i=e.y;this.offset.pending.x+=t,this.offset.pending.y+=i,this.offset.total.x+=t,this.offset.total.y+=i}function Pn(e,t){var i=e.page,n=e.client,r=t.x,a=t.y;i.x+=r,i.y+=a,n.x+=r,n.y+=a}Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.addTotal=Ri,Ce.applyPending=Sn,Ce.default=void 0,oe._ProxyMethods.offsetBy="";var Mo={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=To},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return Ri(e.interaction)},"interactions:before-action-start":Hi,"interactions:before-action-move":Hi,"interactions:before-action-end":function(e){var t=e.interaction;if(Sn(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}};Ce.default=Mo;var Ve={};function Co(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.default=Ve.InertiaState=void 0;var zi=function(){function e(n){(function(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")})(this,e),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=n}var t,i;return t=e,(i=[{key:"start",value:function(n){var r=this.interaction,a=jt(r);if(!a||!a.enabled)return!1;var u=r.coords.velocity.client,s=(0,be.default)(u.x,u.y),c=this.modification||(this.modification=new Me.default(r));if(c.copyFrom(r.modification),this.t0=r._now(),this.allowResume=a.allowResume,this.v0=s,this.currentOffset={x:0,y:0},this.startCoords=r.coords.cur.page,this.modifierArg=c.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-r.coords.cur.timeStamp<50&&s>a.minSpeed&&s>a.endSpeed)this.startInertia();else{if(c.result=c.setAll(this.modifierArg),!c.result.changed)return!1;this.startSmoothEnd()}return r.modification.result.rect=null,r.offsetBy(this.targetOffset),r._doPhase({interaction:r,event:n,phase:"inertiastart"}),r.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),r.modification.result.rect=null,this.active=!0,r.simulation=this,!0}},{key:"startInertia",value:function(){var n=this,r=this.interaction.coords.velocity.client,a=jt(this.interaction),u=a.resistance,s=-Math.log(a.endSpeed/this.v0)/u;this.targetOffset={x:(r.x-s)/u,y:(r.y-s)/u},this.te=s,this.lambda_v0=u/this.v0,this.one_ve_v0=1-a.endSpeed/this.v0;var c=this.modification,p=this.modifierArg;p.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},c.result=c.setAll(p),c.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+c.result.delta.x,y:this.targetOffset.y+c.result.delta.y}),this.onNextFrame(function(){return n.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var n=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return n.smoothEndTick()})}},{key:"onNextFrame",value:function(n){var r=this;this.timeout=pe.default.request(function(){r.active&&n()})}},{key:"inertiaTick",value:function(){var n,r,a,u,s,c=this,p=this.interaction,v=jt(p).resistance,m=(p._now()-this.t0)/1e3;if(m<this.te){var b,E=1-(Math.exp(-v*m)-this.lambda_v0)/this.one_ve_v0;this.isModified?(n=this.targetOffset.x,r=this.targetOffset.y,a=this.modifiedOffset.x,u=this.modifiedOffset.y,b={x:Fi(s=E,0,n,a),y:Fi(s,0,r,u)}):b={x:this.targetOffset.x*E,y:this.targetOffset.y*E};var y={x:b.x-this.currentOffset.x,y:b.y-this.currentOffset.y};this.currentOffset.x+=y.x,this.currentOffset.y+=y.y,p.offsetBy(y),p.move(),this.onNextFrame(function(){return c.inertiaTick()})}else p.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var n=this,r=this.interaction,a=r._now()-this.t0,u=jt(r).smoothEndDuration;if(a<u){var s={x:Wi(a,0,this.targetOffset.x,u),y:Wi(a,0,this.targetOffset.y,u)},c={x:s.x-this.currentOffset.x,y:s.y-this.currentOffset.y};this.currentOffset.x+=c.x,this.currentOffset.y+=c.y,r.offsetBy(c),r.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return n.smoothEndTick()})}else r.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(n){var r=n.pointer,a=n.event,u=n.eventTarget,s=this.interaction;s.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),s.updatePointer(r,a,u,!0),s._doPhase({interaction:s,event:a,phase:"resume"}),(0,A.copyCoords)(s.coords.prev,s.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,pe.default.cancel(this.timeout)}}])&&Co(t.prototype,i),e}();function jt(e){var t=e.interactable,i=e.prepared;return t&&t.options&&i.name&&t.options[i.name].inertia}function Fi(e,t,i,n){var r=1-e;return r*r*t+2*r*e*i+e*e*n}function Wi(e,t,i,n){return-i*(e/=n)*(e-2)+t}Ve.InertiaState=zi;var Ao={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(Ce.default),e.usePlugin(ne.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new zi(t)},"interactions:before-action-end":function(e){var t=e.interaction,i=e.event;return(!t._interacting||t.simulation||!t.inertia.start(i))&&null},"interactions:down":function(e){var t=e.interaction,i=e.eventTarget,n=t.inertia;if(n.active)for(var r=i;d.default.element(r);){if(r===t.element){n.resume(e);break}r=L.parentNode(r)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":ne.addEventModifiers,"interactions:action-inertiastart":ne.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};Ve.default=Ao;var rt={};function Do(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vi(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(e.immediatePropagationStopped)break;n(e)}}Object.defineProperty(rt,"__esModule",{value:!0}),rt.Eventable=void 0;var Lo=function(){function e(n){(function(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=(0,D.default)({},n||{})}var t,i;return t=e,(i=[{key:"fire",value:function(n){var r,a=this.global;(r=this.types[n.type])&&Vi(n,r),!n.propagationStopped&&a&&(r=a[n.type])&&Vi(n,r)}},{key:"on",value:function(n,r){var a=(0,Re.default)(n,r);for(n in a)this.types[n]=$.merge(this.types[n]||[],a[n])}},{key:"off",value:function(n,r){var a=(0,Re.default)(n,r);for(n in a){var u=this.types[n];if(u&&u.length)for(var s=0;s<a[n].length;s++){var c=a[n][s],p=u.indexOf(c);p!==-1&&u.splice(p,1)}}}},{key:"getRect",value:function(n){return null}}])&&Do(t.prototype,i),e}();rt.Eventable=Lo;var ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var i in t.map)if(e.indexOf(i)===0&&e.substr(i.length)in t.phases)return!0;return!1};var kn={};Object.defineProperty(kn,"__esModule",{value:!0}),kn.createInteractStatic=function(e){var t=function i(n,r){var a=e.interactables.get(n,r);return a||((a=e.interactables.new(n,r)).events.global=i.globalEvents),a};return t.getPointerAverage=A.pointerAverage,t.getTouchBBox=A.touchBBox,t.getTouchDistance=A.touchDistance,t.getTouchAngle=A.touchAngle,t.getElementRect=L.getElementRect,t.getElementClientRect=L.getElementClientRect,t.matchesSelector=L.matchesSelector,t.closest=L.closest,t.globalEvents={},t.version="1.10.11",t.scope=e,t.use=function(i,n){return this.scope.usePlugin(i,n),this},t.isSet=function(i,n){return!!this.scope.interactables.get(i,n&&n.context)},t.on=(0,se.warnOnce)(function(i,n,r){if(d.default.string(i)&&i.search(" ")!==-1&&(i=i.trim().split(/ +/)),d.default.array(i)){for(var a=0;a<i.length;a++){var u=i[a];this.on(u,n,r)}return this}if(d.default.object(i)){for(var s in i)this.on(s,i[s],n);return this}return(0,ot.default)(i,this.scope.actions)?this.globalEvents[i]?this.globalEvents[i].push(n):this.globalEvents[i]=[n]:this.scope.events.add(this.scope.document,i,n,{options:r}),this},"The interact.on() method is being deprecated"),t.off=(0,se.warnOnce)(function(i,n,r){if(d.default.string(i)&&i.search(" ")!==-1&&(i=i.trim().split(/ +/)),d.default.array(i)){for(var a=0;a<i.length;a++){var u=i[a];this.off(u,n,r)}return this}if(d.default.object(i)){for(var s in i)this.off(s,i[s],n);return this}var c;return(0,ot.default)(i,this.scope.actions)?i in this.globalEvents&&(c=this.globalEvents[i].indexOf(n))!==-1&&this.globalEvents[i].splice(c,1):this.scope.events.remove(this.scope.document,i,n,r),this},"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return G.default.supportsTouch},t.supportsPointerEvent=function(){return G.default.supportsPointerEvent},t.stop=function(){for(var i=0;i<this.scope.interactions.list.length;i++)this.scope.interactions.list[i].stop();return this},t.pointerMoveTolerance=function(i){return d.default.number(i)?(this.scope.interactions.pointerMoveTolerance=i,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(i,n){this.scope.addDocument(i,n)},t.removeDocument=function(i){this.scope.removeDocument(i)},t};var Rt={};function Io(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.Interactable=void 0;var jo=function(){function e(n,r,a,u){(function(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=void 0,this._actions=void 0,this.target=void 0,this.events=new rt.Eventable,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._rectChecker=void 0,this._actions=r.actions,this.target=n,this._context=r.context||a,this._win=(0,o.getWindow)((0,L.trySelector)(n)?this._context:n),this._doc=this._win.document,this._scopeEvents=u,this.set(r)}var t,i;return t=e,(i=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(n,r){return d.default.func(r.onstart)&&this.on("".concat(n,"start"),r.onstart),d.default.func(r.onmove)&&this.on("".concat(n,"move"),r.onmove),d.default.func(r.onend)&&this.on("".concat(n,"end"),r.onend),d.default.func(r.oninertiastart)&&this.on("".concat(n,"inertiastart"),r.oninertiastart),this}},{key:"updatePerActionListeners",value:function(n,r,a){(d.default.array(r)||d.default.object(r))&&this.off(n,r),(d.default.array(a)||d.default.object(a))&&this.on(n,a)}},{key:"setPerAction",value:function(n,r){var a=this._defaults;for(var u in r){var s=u,c=this.options[n],p=r[s];s==="listeners"&&this.updatePerActionListeners(n,c.listeners,p),d.default.array(p)?c[s]=$.from(p):d.default.plainObject(p)?(c[s]=(0,D.default)(c[s]||{},(0,Te.default)(p)),d.default.object(a.perAction[s])&&"enabled"in a.perAction[s]&&(c[s].enabled=p.enabled!==!1)):d.default.bool(p)&&d.default.object(a.perAction[s])?c[s].enabled=p:c[s]=p}}},{key:"getRect",value:function(n){return n=n||(d.default.element(this.target)?this.target:null),d.default.string(this.target)&&(n=n||this._context.querySelector(this.target)),(0,L.getElementRect)(n)}},{key:"rectChecker",value:function(n){var r=this;return d.default.func(n)?(this._rectChecker=n,this.getRect=function(a){var u=(0,D.default)({},r._rectChecker(a));return"width"in u||(u.width=u.right-u.left,u.height=u.bottom-u.top),u},this):n===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(n,r){if((0,L.trySelector)(r)||d.default.object(r)){for(var a in this.options[n]=r,this._actions.map)this.options[a][n]=r;return this}return this.options[n]}},{key:"origin",value:function(n){return this._backCompatOption("origin",n)}},{key:"deltaSource",value:function(n){return n==="page"||n==="client"?(this.options.deltaSource=n,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(n){return this._context===n.ownerDocument||(0,L.nodeContains)(this._context,n)}},{key:"testIgnoreAllow",value:function(n,r,a){return!this.testIgnore(n.ignoreFrom,r,a)&&this.testAllow(n.allowFrom,r,a)}},{key:"testAllow",value:function(n,r,a){return!n||!!d.default.element(a)&&(d.default.string(n)?(0,L.matchesUpTo)(a,n,r):!!d.default.element(n)&&(0,L.nodeContains)(n,a))}},{key:"testIgnore",value:function(n,r,a){return!(!n||!d.default.element(a))&&(d.default.string(n)?(0,L.matchesUpTo)(a,n,r):!!d.default.element(n)&&(0,L.nodeContains)(n,a))}},{key:"fire",value:function(n){return this.events.fire(n),this}},{key:"_onOff",value:function(n,r,a,u){d.default.object(r)&&!d.default.array(r)&&(u=a,a=null);var s=n==="on"?"add":"remove",c=(0,Re.default)(r,a);for(var p in c){p==="wheel"&&(p=G.default.wheelEvent);for(var v=0;v<c[p].length;v++){var m=c[p][v];(0,ot.default)(p,this._actions)?this.events[n](p,m):d.default.string(this.target)?this._scopeEvents["".concat(s,"Delegate")](this.target,this._context,p,m,u):this._scopeEvents[s](this.target,p,m,u)}}return this}},{key:"on",value:function(n,r,a){return this._onOff("on",n,r,a)}},{key:"off",value:function(n,r,a){return this._onOff("off",n,r,a)}},{key:"set",value:function(n){var r=this._defaults;for(var a in d.default.object(n)||(n={}),this.options=(0,Te.default)(r.base),this._actions.methodDict){var u=a,s=this._actions.methodDict[u];this.options[u]={},this.setPerAction(u,(0,D.default)((0,D.default)({},r.perAction),r.actions[u])),this[s](n[u])}for(var c in n)d.default.func(this[c])&&this[c](n[c]);return this}},{key:"unset",value:function(){if(d.default.string(this.target))for(var n in this._scopeEvents.delegatedEvents)for(var r=this._scopeEvents.delegatedEvents[n],a=r.length-1;a>=0;a--){var u=r[a],s=u.selector,c=u.context,p=u.listeners;s===this.target&&c===this._context&&r.splice(a,1);for(var v=p.length-1;v>=0;v--)this._scopeEvents.removeDelegate(this.target,this._context,n,p[v][0],p[v][1])}else this._scopeEvents.remove(this.target,"all")}}])&&Io(t.prototype,i),e}();Rt.Interactable=jo;var Ht={};function Ro(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.InteractableSet=void 0;var Ho=function(){function e(n){var r=this;(function(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=n,n.addListeners({"interactable:unset":function(a){var u=a.interactable,s=u.target,c=u._context,p=d.default.string(s)?r.selectorMap[s]:s[r.scope.id],v=$.findIndex(p,function(m){return m.context===c});p[v]&&(p[v].context=null,p[v].interactable=null),p.splice(v,1)}})}var t,i;return t=e,(i=[{key:"new",value:function(n,r){r=(0,D.default)(r||{},{actions:this.scope.actions});var a=new this.scope.Interactable(n,r,this.scope.document,this.scope.events),u={context:a._context,interactable:a};return this.scope.addDocument(a._doc),this.list.push(a),d.default.string(n)?(this.selectorMap[n]||(this.selectorMap[n]=[]),this.selectorMap[n].push(u)):(a.target[this.scope.id]||Object.defineProperty(n,this.scope.id,{value:[],configurable:!0}),n[this.scope.id].push(u)),this.scope.fire("interactable:new",{target:n,options:r,interactable:a,win:this.scope._win}),a}},{key:"get",value:function(n,r){var a=r&&r.context||this.scope.document,u=d.default.string(n),s=u?this.selectorMap[n]:n[this.scope.id];if(!s)return null;var c=$.find(s,function(p){return p.context===a&&(u||p.interactable.inContext(n))});return c&&c.interactable}},{key:"forEachMatch",value:function(n,r){for(var a=0;a<this.list.length;a++){var u=this.list[a],s=void 0;if((d.default.string(u.target)?d.default.element(n)&&L.matchesSelector(n,u.target):n===u.target)&&u.inContext(n)&&(s=r(u)),s!==void 0)return s}}}])&&Ro(t.prototype,i),e}();Ht.InteractableSet=Ho;var zt={};function zo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function On(e,t){return function(i){if(Array.isArray(i))return i}(e)||function(i,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i)){var r=[],a=!0,u=!1,s=void 0;try{for(var c,p=i[Symbol.iterator]();!(a=(c=p.next()).done)&&(r.push(c.value),!n||r.length!==n);a=!0);}catch(v){u=!0,s=v}finally{try{a||p.return==null||p.return()}finally{if(u)throw s}}return r}}(e,t)||function(i,n){if(i){if(typeof i=="string")return Ni(i,n);var r=Object.prototype.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ni(i,n):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ni(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}Object.defineProperty(zt,"__esModule",{value:!0}),zt.default=void 0;var Fo=function(){function e(n){(function(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")})(this,e),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=n,(0,Je.default)(this,n)}var t,i;return t=e,(i=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&zo(t.prototype,i),e}();function at(e){if(!d.default.object(e))return{capture:!!e,passive:!1};var t=(0,D.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var Wo={id:"events",install:function(e){var t,i=[],n={},r=[],a={add:u,remove:s,addDelegate:function(v,m,b,E,y){var k=at(y);if(!n[b]){n[b]=[];for(var M=0;M<r.length;M++){var P=r[M];u(P,b,c),u(P,b,p,!0)}}var C=n[b],R=$.find(C,function(N){return N.selector===v&&N.context===m});R||(R={selector:v,context:m,listeners:[]},C.push(R)),R.listeners.push([E,k])},removeDelegate:function(v,m,b,E,y){var k,M=at(y),P=n[b],C=!1;if(P)for(k=P.length-1;k>=0;k--){var R=P[k];if(R.selector===v&&R.context===m){for(var N=R.listeners,X=N.length-1;X>=0;X--){var Z=On(N[X],2),q=Z[0],Y=Z[1],ue=Y.capture,ye=Y.passive;if(q===E&&ue===M.capture&&ye===M.passive){N.splice(X,1),N.length||(P.splice(k,1),s(m,b,c),s(m,b,p,!0)),C=!0;break}}if(C)break}}},delegateListener:c,delegateUseCapture:p,delegatedEvents:n,documents:r,targets:i,supportsOptions:!1,supportsPassive:!1};function u(v,m,b,E){var y=at(E),k=$.find(i,function(M){return M.eventTarget===v});k||(k={eventTarget:v,events:{}},i.push(k)),k.events[m]||(k.events[m]=[]),v.addEventListener&&!$.contains(k.events[m],b)&&(v.addEventListener(m,b,a.supportsOptions?y:y.capture),k.events[m].push(b))}function s(v,m,b,E){var y=at(E),k=$.findIndex(i,function(X){return X.eventTarget===v}),M=i[k];if(M&&M.events)if(m!=="all"){var P=!1,C=M.events[m];if(C){if(b==="all"){for(var R=C.length-1;R>=0;R--)s(v,m,C[R],y);return}for(var N=0;N<C.length;N++)if(C[N]===b){v.removeEventListener(m,b,a.supportsOptions?y:y.capture),C.splice(N,1),C.length===0&&(delete M.events[m],P=!0);break}}P&&!Object.keys(M.events).length&&i.splice(k,1)}else for(m in M.events)M.events.hasOwnProperty(m)&&s(v,m,"all")}function c(v,m){for(var b=at(m),E=new Fo(v),y=n[v.type],k=On(A.getEventTargets(v),1)[0],M=k;d.default.element(M);){for(var P=0;P<y.length;P++){var C=y[P],R=C.selector,N=C.context;if(L.matchesSelector(M,R)&&L.nodeContains(N,k)&&L.nodeContains(N,M)){var X=C.listeners;E.currentTarget=M;for(var Z=0;Z<X.length;Z++){var q=On(X[Z],2),Y=q[0],ue=q[1],ye=ue.capture,Wn=ue.passive;ye===b.capture&&Wn===b.passive&&Y(E)}}}M=L.parentNode(M)}}function p(v){return c(v,!0)}return(t=e.document)==null||t.createElement("div").addEventListener("test",null,{get capture(){return a.supportsOptions=!0},get passive(){return a.supportsPassive=!0}}),e.events=a,a}};zt.default=Wo;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.default=void 0;var Wt={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<Wt.methodOrder.length;t++){var i;i=Wt.methodOrder[t];var n=Wt[i](e);if(n)return n}return null},simulationResume:function(e){var t=e.pointerType,i=e.eventType,n=e.eventTarget,r=e.scope;if(!/down|start/i.test(i))return null;for(var a=0;a<r.interactions.list.length;a++){var u=r.interactions.list[a],s=n;if(u.simulation&&u.simulation.allowResume&&u.pointerType===t)for(;s;){if(s===u.element)return u;s=L.parentNode(s)}}return null},mouseOrPen:function(e){var t,i=e.pointerId,n=e.pointerType,r=e.eventType,a=e.scope;if(n!=="mouse"&&n!=="pen")return null;for(var u=0;u<a.interactions.list.length;u++){var s=a.interactions.list[u];if(s.pointerType===n){if(s.simulation&&!Bi(s,i))continue;if(s.interacting())return s;t||(t=s)}}if(t)return t;for(var c=0;c<a.interactions.list.length;c++){var p=a.interactions.list[c];if(!(p.pointerType!==n||/down/i.test(r)&&p.simulation))return p}return null},hasPointer:function(e){for(var t=e.pointerId,i=e.scope,n=0;n<i.interactions.list.length;n++){var r=i.interactions.list[n];if(Bi(r,t))return r}return null},idle:function(e){for(var t=e.pointerType,i=e.scope,n=0;n<i.interactions.list.length;n++){var r=i.interactions.list[n];if(r.pointers.length===1){var a=r.interactable;if(a&&(!a.options.gesture||!a.options.gesture.enabled))continue}else if(r.pointers.length>=2)continue;if(!r.interacting()&&t===r.pointerType)return r}return null}};function Bi(e,t){return e.pointers.some(function(i){return i.id===t})}var Vo=Wt;Ft.default=Vo;var Vt={};function qi(e){return(qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Xi(e,t){return function(i){if(Array.isArray(i))return i}(e)||function(i,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i)){var r=[],a=!0,u=!1,s=void 0;try{for(var c,p=i[Symbol.iterator]();!(a=(c=p.next()).done)&&(r.push(c.value),!n||r.length!==n);a=!0);}catch(v){u=!0,s=v}finally{try{a||p.return==null||p.return()}finally{if(u)throw s}}return r}}(e,t)||function(i,n){if(i){if(typeof i=="string")return Yi(i,n);var r=Object.prototype.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yi(i,n):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yi(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function No(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bo(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $i(e,t){return($i=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i})(e,t)}function qo(e,t){return!t||qi(t)!=="object"&&typeof t!="function"?function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(e):t}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=void 0;var Tn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Ui(e,t){return function(i){var n=t.interactions.list,r=A.getPointerType(i),a=Xi(A.getEventTargets(i),2),u=a[0],s=a[1],c=[];if(/^touch/.test(i.type)){t.prevTouchTime=t.now();for(var p=0;p<i.changedTouches.length;p++){var v=i.changedTouches[p],m={pointer:v,pointerId:A.getPointerId(v),pointerType:r,eventType:i.type,eventTarget:u,curEventTarget:s,scope:t},b=Gi(m);c.push([m.pointer,m.eventTarget,m.curEventTarget,b])}}else{var E=!1;if(!G.default.supportsPointerEvent&&/mouse/.test(i.type)){for(var y=0;y<n.length&&!E;y++)E=n[y].pointerType!=="mouse"&&n[y].pointerIsDown;E=E||t.now()-t.prevTouchTime<500||i.timeStamp===0}if(!E){var k={pointer:i,pointerId:A.getPointerId(i),pointerType:r,eventType:i.type,curEventTarget:s,eventTarget:u,scope:t},M=Gi(k);c.push([k.pointer,k.eventTarget,k.curEventTarget,M])}}for(var P=0;P<c.length;P++){var C=Xi(c[P],4),R=C[0],N=C[1],X=C[2];C[3][e](R,i,N,X)}}}function Gi(e){var t=e.pointerType,i=e.scope,n={interaction:Ft.default.search(e),searchDetails:e};return i.fire("interactions:find",n),n.interaction||i.interactions.new({pointerType:t})}function Mn(e,t){var i=e.doc,n=e.scope,r=e.options,a=n.interactions.docEvents,u=n.events,s=u[t];for(var c in n.browser.isIOS&&!r.events&&(r.events={passive:!1}),u.delegatedEvents)s(i,c,u.delegateListener),s(i,c,u.delegateUseCapture,!0);for(var p=r&&r.events,v=0;v<a.length;v++){var m=a[v];s(i,m.type,m.listener,p)}}var Xo={id:"core/interactions",install:function(e){for(var t={},i=0;i<Tn.length;i++){var n=Tn[i];t[n]=Ui(n,e)}var r,a=G.default.pEventTypes;function u(){for(var s=0;s<e.interactions.list.length;s++){var c=e.interactions.list[s];if(c.pointerIsDown&&c.pointerType==="touch"&&!c._interacting)for(var p=function(){var m=c.pointers[v];e.documents.some(function(b){var E=b.doc;return(0,L.nodeContains)(E,m.downTarget)})||c.removePointer(m.pointer,m.event)},v=0;v<c.pointers.length;v++)p()}}(r=I.default.PointerEvent?[{type:a.down,listener:u},{type:a.down,listener:t.pointerDown},{type:a.move,listener:t.pointerMove},{type:a.up,listener:t.pointerUp},{type:a.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:u},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(s){for(var c=0;c<e.interactions.list.length;c++)e.interactions.list[c].documentBlur(s)}}),e.prevTouchTime=0,e.Interaction=function(s){(function(y,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(k&&k.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),k&&$i(y,k)})(E,s);var c,p,v,m,b=(v=E,m=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}(),function(){var y,k=_n(v);if(m){var M=_n(this).constructor;y=Reflect.construct(k,arguments,M)}else y=k.apply(this,arguments);return qo(this,y)});function E(){return No(this,E),b.apply(this,arguments)}return c=E,(p=[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(y){e.interactions.pointerMoveTolerance=y}},{key:"_now",value:function(){return e.now()}}])&&Bo(c.prototype,p),E}(oe.default),e.interactions={list:[],new:function(s){s.scopeFire=function(p,v){return e.fire(p,v)};var c=new e.Interaction(s);return e.interactions.list.push(c),c},listeners:t,docEvents:r,pointerMoveTolerance:1},e.usePlugin(Fe.default)},listeners:{"scope:add-document":function(e){return Mn(e,"add")},"scope:remove-document":function(e){return Mn(e,"remove")},"interactable:unset":function(e,t){for(var i=e.interactable,n=t.interactions.list.length-1;n>=0;n--){var r=t.interactions.list[n];r.interactable===i&&(r.stop(),t.fire("interactions:destroy",{interaction:r}),r.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(n,1))}}},onDocSignal:Mn,doOnInteractions:Ui,methodNames:Tn};Vt.default=Xo;var st={};function Ki(e){return(Ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Cn(e,t,i){return(Cn=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(n,r,a){var u=function(c,p){for(;!Object.prototype.hasOwnProperty.call(c,p)&&(c=Ne(c))!==null;);return c}(n,r);if(u){var s=Object.getOwnPropertyDescriptor(u,r);return s.get?s.get.call(a):s.value}})(e,t,i||e)}function Zi(e,t){return(Zi=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i})(e,t)}function Yo(e,t){return!t||Ki(t)!=="object"&&typeof t!="function"?function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function er(e,t,i){return t&&Qi(e.prototype,t),i&&Qi(e,i),e}Object.defineProperty(st,"__esModule",{value:!0}),st.initScope=tr,st.Scope=void 0;var $o=function(){function e(){var t=this;Ji(this,e),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=G.default,this.defaults=(0,Te.default)(tt.defaults),this.Eventable=rt.Eventable,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(0,kn.createInteractStatic)(this),this.InteractEvent=nt.InteractEvent,this.Interactable=void 0,this.interactables=new Ht.InteractableSet(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(n){return t.removeDocument(n.target)};var i=this;this.Interactable=function(n){(function(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),p&&Zi(c,p)})(s,n);var r,a,u=(r=s,a=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}(),function(){var c,p=Ne(r);if(a){var v=Ne(this).constructor;c=Reflect.construct(p,arguments,v)}else c=p.apply(this,arguments);return Yo(this,c)});function s(){return Ji(this,s),u.apply(this,arguments)}return er(s,[{key:"_defaults",get:function(){return i.defaults}},{key:"set",value:function(c){return Cn(Ne(s.prototype),"set",this).call(this,c),i.fire("interactable:set",{options:c,interactable:this}),this}},{key:"unset",value:function(){Cn(Ne(s.prototype),"unset",this).call(this),i.interactables.list.splice(i.interactables.list.indexOf(this),1),i.fire("interactable:unset",{interactable:this})}}]),s}(Rt.Interactable)}return er(e,[{key:"addListeners",value:function(t,i){this.listenerMaps.push({id:i,map:t})}},{key:"fire",value:function(t,i){for(var n=0;n<this.listenerMaps.length;n++){var r=this.listenerMaps[n].map[t];if(r&&r(i,this,t)===!1)return!1}}},{key:"init",value:function(t){return this.isInitialized?this:tr(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||this._plugins.list.indexOf(t)!==-1}},{key:"usePlugin",value:function(t,i){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,i),t.listeners&&t.before){for(var n=0,r=this.listenerMaps.length,a=t.before.reduce(function(s,c){return s[c]=!0,s[nr(c)]=!0,s},{});n<r;n++){var u=this.listenerMaps[n].id;if(a[u]||a[nr(u)])break}this.listenerMaps.splice(n,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,i){if(this.getDocIndex(t)!==-1)return!1;var n=o.getWindow(t);i=i?(0,D.default)({},i):{},this.documents.push({doc:t,options:i}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:i})}},{key:"removeDocument",value:function(t){var i=this.getDocIndex(t),n=o.getWindow(t),r=this.documents[i].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(i,1),this.events.documents.splice(i,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:r})}},{key:"getDocIndex",value:function(t){for(var i=0;i<this.documents.length;i++)if(this.documents[i].doc===t)return i;return-1}},{key:"getDocOptions",value:function(t){var i=this.getDocIndex(t);return i===-1?null:this.documents[i].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function tr(e,t){return e.isInitialized=!0,d.default.window(t)&&o.init(t),I.default.init(t),G.default.init(t),pe.default.init(t),e.window=t,e.document=t.document,e.usePlugin(Vt.default),e.usePlugin(zt.default),e}function nr(e){return e&&e.replace(/\/.*$/,"")}st.Scope=$o;var ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=void 0;var ir=new st.Scope,Uo=ir.interactStatic;ie.default=Uo;var Go=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:void 0;ir.init(Go);var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.default=void 0,Nt.default=function(){};var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.default=void 0,Bt.default=function(){};var qt={};function rr(e,t){return function(i){if(Array.isArray(i))return i}(e)||function(i,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i)){var r=[],a=!0,u=!1,s=void 0;try{for(var c,p=i[Symbol.iterator]();!(a=(c=p.next()).done)&&(r.push(c.value),!n||r.length!==n);a=!0);}catch(v){u=!0,s=v}finally{try{a||p.return==null||p.return()}finally{if(u)throw s}}return r}}(e,t)||function(i,n){if(i){if(typeof i=="string")return or(i,n);var r=Object.prototype.toString.call(i).slice(8,-1);return r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set"?Array.from(i):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(i,n):void 0}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function or(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}Object.defineProperty(qt,"__esModule",{value:!0}),qt.default=void 0,qt.default=function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(n){var r=rr(n,2),a=r[0],u=r[1];return a in e||u in e}),i=function(n,r){for(var a=e.range,u=e.limits,s=u===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:u,c=e.offset,p=c===void 0?{x:0,y:0}:c,v={range:a,grid:e,x:null,y:null},m=0;m<t.length;m++){var b=rr(t[m],2),E=b[0],y=b[1],k=Math.round((n-p.x)/e[E]),M=Math.round((r-p.y)/e[y]);v[E]=Math.max(s.left,Math.min(s.right,k*e[E]+p.x)),v[y]=Math.max(s.top,Math.min(s.bottom,M*e[y]+p.y))}return v};return i.grid=e,i.coordFields=t,i};var lt={};Object.defineProperty(lt,"__esModule",{value:!0}),Object.defineProperty(lt,"edgeTarget",{enumerable:!0,get:function(){return Nt.default}}),Object.defineProperty(lt,"elements",{enumerable:!0,get:function(){return Bt.default}}),Object.defineProperty(lt,"grid",{enumerable:!0,get:function(){return qt.default}});var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.default=void 0;var Ko={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,D.default)(t.snappers||{},lt),t.createSnapGrid=t.snappers.grid}};Xt.default=Ko;var Be={};function ar(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),i.push.apply(i,n)}return i}function An(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ar(Object(i),!0).forEach(function(n){Zo(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ar(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function Zo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Be,"__esModule",{value:!0}),Be.aspectRatio=Be.default=void 0;var sr={start:function(e){if(!e.state.options.enabled)return!1;var t=e.state,i=e.rect,n=e.edges,r=e.pageCoords,a=t.options.ratio,u=t.options,s=u.equalDelta,c=u.modifiers;a==="preserve"&&(a=i.width/i.height),t.startCoords=(0,D.default)({},r),t.startRect=(0,D.default)({},i),t.ratio=a,t.equalDelta=s;var p=t.linkedEdges={top:n.top||n.left&&!n.bottom,left:n.left||n.top&&!n.right,bottom:n.bottom||n.right&&!n.top,right:n.right||n.bottom&&!n.left};if(t.xIsPrimaryAxis=!(!n.left&&!n.right),t.equalDelta)t.edgeSign=(p.left?1:-1)*(p.top?1:-1);else{var v=t.xIsPrimaryAxis?p.top:p.left;t.edgeSign=v?-1:1}if((0,D.default)(e.edges,p),c&&c.length){var m=new Me.default(e.interaction);m.copyFrom(e.interaction.modification),m.prepareStates(c),t.subModification=m,m.startAll(An({},e))}},set:function(e){if(e.state.options.enabled===!1)return!1;var t=e.state,i=e.rect,n=e.coords,r=(0,D.default)({},n),a=t.equalDelta?Jo:Qo;if(a(t,t.xIsPrimaryAxis,n,i),!t.subModification)return null;var u=(0,D.default)({},i);(0,K.addEdges)(t.linkedEdges,u,{x:n.x-r.x,y:n.y-r.y});var s=t.subModification.setAll(An(An({},e),{},{rect:u,edges:t.linkedEdges,pageCoords:n,prevCoords:n,prevRect:u})),c=s.delta;return s.changed&&(a(t,Math.abs(c.x)>Math.abs(c.y),s.coords,s.rect),(0,D.default)(n,s.coords)),s.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Jo(e,t,i){var n=e.startCoords,r=e.edgeSign;t?i.y=n.y+(i.x-n.x)*r:i.x=n.x+(i.y-n.y)*r}function Qo(e,t,i,n){var r=e.startRect,a=e.startCoords,u=e.ratio,s=e.edgeSign;if(t){var c=n.width/u;i.y=a.y+(c-r.height)*s}else{var p=n.height*u;i.x=a.x+(p-r.width)*s}}Be.aspectRatio=sr;var ea=(0,ne.makeModifier)(sr,"aspectRatio");Be.default=ea;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.default=void 0;var lr=function(){};lr._defaults={};var ta=lr;Ae.default=ta;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0}),Object.defineProperty(Dn,"default",{enumerable:!0,get:function(){return Ae.default}});var re={};function Ln(e,t,i){return d.default.func(e)?K.resolveRectLike(e,t.interactable,t.element,[i.x,i.y,t]):K.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(re,"__esModule",{value:!0}),re.getRestrictionRect=Ln,re.restrict=re.default=void 0;var cr={start:function(e){var t=e.rect,i=e.startOffset,n=e.state,r=e.interaction,a=e.pageCoords,u=n.options,s=u.elementRect,c=(0,D.default)({left:0,top:0,right:0,bottom:0},u.offset||{});if(t&&s){var p=Ln(u.restriction,r,a);if(p){var v=p.right-p.left-t.width,m=p.bottom-p.top-t.height;v<0&&(c.left+=v,c.right+=v),m<0&&(c.top+=m,c.bottom+=m)}c.left+=i.left-t.width*s.left,c.top+=i.top-t.height*s.top,c.right+=i.right-t.width*(1-s.right),c.bottom+=i.bottom-t.height*(1-s.bottom)}n.offset=c},set:function(e){var t=e.coords,i=e.interaction,n=e.state,r=n.options,a=n.offset,u=Ln(r.restriction,i,t);if(u){var s=K.xywhToTlbr(u);t.x=Math.max(Math.min(s.right-a.right,t.x),s.left+a.left),t.y=Math.max(Math.min(s.bottom-a.bottom,t.y),s.top+a.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};re.restrict=cr;var na=(0,ne.makeModifier)(cr,"restrict");re.default=na;var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.restrictEdges=fe.default=void 0;var ur={top:1/0,left:1/0,bottom:-1/0,right:-1/0},dr={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function pr(e,t){for(var i=["top","left","bottom","right"],n=0;n<i.length;n++){var r=i[n];r in e||(e[r]=t[r])}return e}var fr={noInner:ur,noOuter:dr,start:function(e){var t,i=e.interaction,n=e.startOffset,r=e.state,a=r.options;if(a){var u=(0,re.getRestrictionRect)(a.offset,i,i.coords.start.page);t=K.rectToXY(u)}t=t||{x:0,y:0},r.offset={top:t.y+n.top,left:t.x+n.left,bottom:t.y-n.bottom,right:t.x-n.right}},set:function(e){var t=e.coords,i=e.edges,n=e.interaction,r=e.state,a=r.offset,u=r.options;if(i){var s=(0,D.default)({},t),c=(0,re.getRestrictionRect)(u.inner,n,s)||{},p=(0,re.getRestrictionRect)(u.outer,n,s)||{};pr(c,ur),pr(p,dr),i.top?t.y=Math.min(Math.max(p.top+a.top,s.y),c.top+a.top):i.bottom&&(t.y=Math.max(Math.min(p.bottom+a.bottom,s.y),c.bottom+a.bottom)),i.left?t.x=Math.min(Math.max(p.left+a.left,s.x),c.left+a.left):i.right&&(t.x=Math.max(Math.min(p.right+a.right,s.x),c.right+a.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};fe.restrictEdges=fr;var ia=(0,ne.makeModifier)(fr,"restrictEdges");fe.default=ia;var qe={};Object.defineProperty(qe,"__esModule",{value:!0}),qe.restrictRect=qe.default=void 0;var ra=(0,D.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},re.restrict.defaults),hr={start:re.restrict.start,set:re.restrict.set,defaults:ra};qe.restrictRect=hr;var oa=(0,ne.makeModifier)(hr,"restrictRect");qe.default=oa;var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.restrictSize=Xe.default=void 0;var aa={width:-1/0,height:-1/0},sa={width:1/0,height:1/0},vr={start:function(e){return fe.restrictEdges.start(e)},set:function(e){var t=e.interaction,i=e.state,n=e.rect,r=e.edges,a=i.options;if(r){var u=K.tlbrToXywh((0,re.getRestrictionRect)(a.min,t,e.coords))||aa,s=K.tlbrToXywh((0,re.getRestrictionRect)(a.max,t,e.coords))||sa;i.options={endOnly:a.endOnly,inner:(0,D.default)({},fe.restrictEdges.noInner),outer:(0,D.default)({},fe.restrictEdges.noOuter)},r.top?(i.options.inner.top=n.bottom-u.height,i.options.outer.top=n.bottom-s.height):r.bottom&&(i.options.inner.bottom=n.top+u.height,i.options.outer.bottom=n.top+s.height),r.left?(i.options.inner.left=n.right-u.width,i.options.outer.left=n.right-s.width):r.right&&(i.options.inner.right=n.left+u.width,i.options.outer.right=n.left+s.width),fe.restrictEdges.set(e),i.options=a}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Xe.restrictSize=vr;var la=(0,ne.makeModifier)(vr,"restrictSize");Xe.default=la;var In={};Object.defineProperty(In,"__esModule",{value:!0}),Object.defineProperty(In,"default",{enumerable:!0,get:function(){return Ae.default}});var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.snap=Ee.default=void 0;var gr={start:function(e){var t,i=e.interaction,n=e.interactable,r=e.element,a=e.rect,u=e.state,s=e.startOffset,c=u.options,p=c.offsetWithOrigin?function(b){var E=b.interaction.element;return(0,K.rectToXY)((0,K.resolveRectLike)(b.state.options.origin,null,null,[E]))||(0,Oe.default)(b.interactable,E,b.interaction.prepared.name)}(e):{x:0,y:0};if(c.offset==="startCoords")t={x:i.coords.start.page.x,y:i.coords.start.page.y};else{var v=(0,K.resolveRectLike)(c.offset,n,r,[i]);(t=(0,K.rectToXY)(v)||{x:0,y:0}).x+=p.x,t.y+=p.y}var m=c.relativePoints;u.offsets=a&&m&&m.length?m.map(function(b,E){return{index:E,relativePoint:b,x:s.left-a.width*b.x+t.x,y:s.top-a.height*b.y+t.y}}):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,i=e.coords,n=e.state,r=n.options,a=n.offsets,u=(0,Oe.default)(t.interactable,t.element,t.prepared.name),s=(0,D.default)({},i),c=[];r.offsetWithOrigin||(s.x-=u.x,s.y-=u.y);for(var p=0;p<a.length;p++)for(var v=a[p],m=s.x-v.x,b=s.y-v.y,E=0,y=r.targets.length;E<y;E++){var k,M=r.targets[E];(k=d.default.func(M)?M(m,b,t._proxy,v,E):M)&&c.push({x:(d.default.number(k.x)?k.x:m)+v.x,y:(d.default.number(k.y)?k.y:b)+v.y,range:d.default.number(k.range)?k.range:r.range,source:M,index:E,offset:v})}for(var P={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},C=0;C<c.length;C++){var R=c[C],N=R.range,X=R.x-s.x,Z=R.y-s.y,q=(0,be.default)(X,Z),Y=q<=N;N===1/0&&P.inRange&&P.range!==1/0&&(Y=!1),P.target&&!(Y?P.inRange&&N!==1/0?q/N<P.distance/P.range:N===1/0&&P.range!==1/0||q<P.distance:!P.inRange&&q<P.distance)||(P.target=R,P.distance=q,P.range=N,P.inRange=Y,P.delta.x=X,P.delta.y=Z)}return P.inRange&&(i.x=P.target.x,i.y=P.target.y),n.closest=P,P},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Ee.snap=gr;var ca=(0,ne.makeModifier)(gr,"snap");Ee.default=ca;var me={};function mr(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}Object.defineProperty(me,"__esModule",{value:!0}),me.snapSize=me.default=void 0;var yr={start:function(e){var t=e.state,i=e.edges,n=t.options;if(!i)return null;e.state={options:{targets:null,relativePoints:[{x:i.left?0:1,y:i.top?0:1}],offset:n.offset||"self",origin:{x:0,y:0},range:n.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],Ee.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,i,n=e.interaction,r=e.state,a=e.coords,u=r.options,s=r.offsets,c={x:a.x-s[0].x,y:a.y-s[0].y};r.options=(0,D.default)({},u),r.options.targets=[];for(var p=0;p<(u.targets||[]).length;p++){var v=(u.targets||[])[p],m=void 0;if(m=d.default.func(v)?v(c.x,c.y,n):v){for(var b=0;b<r.targetFields.length;b++){var E=(t=r.targetFields[b],i=2,function(P){if(Array.isArray(P))return P}(t)||function(P,C){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(P)){var R=[],N=!0,X=!1,Z=void 0;try{for(var q,Y=P[Symbol.iterator]();!(N=(q=Y.next()).done)&&(R.push(q.value),!C||R.length!==C);N=!0);}catch(ue){X=!0,Z=ue}finally{try{N||Y.return==null||Y.return()}finally{if(X)throw Z}}return R}}(t,i)||function(P,C){if(P){if(typeof P=="string")return mr(P,C);var R=Object.prototype.toString.call(P).slice(8,-1);return R==="Object"&&P.constructor&&(R=P.constructor.name),R==="Map"||R==="Set"?Array.from(P):R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R)?mr(P,C):void 0}}(t,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),y=E[0],k=E[1];if(y in m||k in m){m.x=m[y],m.y=m[k];break}}r.options.targets.push(m)}}var M=Ee.snap.set(e);return r.options=u,M},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};me.snapSize=yr;var ua=(0,ne.makeModifier)(yr,"snapSize");me.default=ua;var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.snapEdges=Ye.default=void 0;var br={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],me.snapSize.start(e)):null},set:me.snapSize.set,defaults:(0,D.default)((0,Te.default)(me.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Ye.snapEdges=br;var da=(0,ne.makeModifier)(br,"snapEdges");Ye.default=da;var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),Object.defineProperty(jn,"default",{enumerable:!0,get:function(){return Ae.default}});var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0}),Object.defineProperty(Rn,"default",{enumerable:!0,get:function(){return Ae.default}});var $e={};Object.defineProperty($e,"__esModule",{value:!0}),$e.default=void 0;var pa={aspectRatio:Be.default,restrictEdges:fe.default,restrict:re.default,restrictRect:qe.default,restrictSize:Xe.default,snapEdges:Ye.default,snap:Ee.default,snapSize:me.default,spring:jn.default,avoid:Dn.default,transform:Rn.default,rubberband:In.default};$e.default=pa;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.default=void 0;var fa={id:"modifiers",install:function(e){var t=e.interactStatic;for(var i in e.usePlugin(ne.default),e.usePlugin(Xt.default),t.modifiers=$e.default,$e.default){var n=$e.default[i],r=n._defaults,a=n._methods;r._methods=a,e.defaults.perAction[i]=r}}};Yt.default=fa;var De={};function wr(e){return(wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ha(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Er(e,t){return(Er=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i})(e,t)}function va(e,t){return!t||wr(t)!=="object"&&typeof t!="function"?Hn(e):t}function Hn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}Object.defineProperty(De,"__esModule",{value:!0}),De.PointerEvent=De.default=void 0;var ga=function(e){(function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),c&&Er(s,c)})(u,e);var t,i,n,r,a=(n=u,r=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}(),function(){var s,c=zn(n);if(r){var p=zn(this).constructor;s=Reflect.construct(c,arguments,p)}else s=c.apply(this,arguments);return va(this,s)});function u(s,c,p,v,m,b){var E;if(function(M,P){if(!(M instanceof P))throw new TypeError("Cannot call a class as a function")}(this,u),(E=a.call(this,m)).type=void 0,E.originalEvent=void 0,E.pointerId=void 0,E.pointerType=void 0,E.double=void 0,E.pageX=void 0,E.pageY=void 0,E.clientX=void 0,E.clientY=void 0,E.dt=void 0,E.eventable=void 0,A.pointerExtend(Hn(E),p),p!==c&&A.pointerExtend(Hn(E),c),E.timeStamp=b,E.originalEvent=p,E.type=s,E.pointerId=A.getPointerId(c),E.pointerType=A.getPointerType(c),E.target=v,E.currentTarget=null,s==="tap"){var y=m.getPointerIndex(c);E.dt=E.timeStamp-m.pointers[y].downTime;var k=E.timeStamp-m.tapTime;E.double=!!(m.prevTap&&m.prevTap.type!=="doubletap"&&m.prevTap.target===E.target&&k<500)}else s==="doubletap"&&(E.dt=c.timeStamp-m.tapTime);return E}return t=u,(i=[{key:"_subtractOrigin",value:function(s){var c=s.x,p=s.y;return this.pageX-=c,this.pageY-=p,this.clientX-=c,this.clientY-=p,this}},{key:"_addOrigin",value:function(s){var c=s.x,p=s.y;return this.pageX+=c,this.pageY+=p,this.clientX+=c,this.clientY+=p,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&ha(t.prototype,i),u}(He.BaseEvent);De.PointerEvent=De.default=ga;var ct={};Object.defineProperty(ct,"__esModule",{value:!0}),ct.default=void 0;var $t={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=$t,e.defaults.actions.pointerEvents=$t.defaults,(0,D.default)(e.actions.phaselessTypes,$t.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,i=e.pointerInfo;!t&&i.hold||(i.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var i=e.interaction,n=e.pointer,r=e.event,a=e.eventTarget;e.duplicate||i.pointerIsDown&&!i.pointerWasMoved||(i.pointerIsDown&&Fn(e),xe({interaction:i,pointer:n,event:r,eventTarget:a,type:"move"},t))},"interactions:down":function(e,t){(function(i,n){for(var r=i.interaction,a=i.pointer,u=i.event,s=i.eventTarget,c=i.pointerIndex,p=r.pointers[c].hold,v=L.getPath(s),m={interaction:r,pointer:a,event:u,eventTarget:s,type:"hold",targets:[],path:v,node:null},b=0;b<v.length;b++){var E=v[b];m.node=E,n.fire("pointerEvents:collect-targets",m)}if(m.targets.length){for(var y=1/0,k=0;k<m.targets.length;k++){var M=m.targets[k].eventable.options.holdDuration;M<y&&(y=M)}p.duration=y,p.timeout=setTimeout(function(){xe({interaction:r,eventTarget:s,pointer:a,event:u,type:"hold"},n)},y)}})(e,t),xe(e,t)},"interactions:up":function(e,t){Fn(e),xe(e,t),function(i,n){var r=i.interaction,a=i.pointer,u=i.event,s=i.eventTarget;r.pointerWasMoved||xe({interaction:r,eventTarget:s,pointer:a,event:u,type:"tap"},n)}(e,t)},"interactions:cancel":function(e,t){Fn(e),xe(e,t)}},PointerEvent:De.PointerEvent,fire:xe,collectEventTargets:xr,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function xe(e,t){var i=e.interaction,n=e.pointer,r=e.event,a=e.eventTarget,u=e.type,s=e.targets,c=s===void 0?xr(e,t):s,p=new De.PointerEvent(u,n,r,a,i,t.now());t.fire("pointerEvents:new",{pointerEvent:p});for(var v={interaction:i,pointer:n,event:r,eventTarget:a,targets:c,type:u,pointerEvent:p},m=0;m<c.length;m++){var b=c[m];for(var E in b.props||{})p[E]=b.props[E];var y=(0,Oe.default)(b.eventable,b.node);if(p._subtractOrigin(y),p.eventable=b.eventable,p.currentTarget=b.node,b.eventable.fire(p),p._addOrigin(y),p.immediatePropagationStopped||p.propagationStopped&&m+1<c.length&&c[m+1].node!==p.currentTarget)break}if(t.fire("pointerEvents:fired",v),u==="tap"){var k=p.double?xe({interaction:i,pointer:n,event:r,eventTarget:a,type:"doubletap"},t):p;i.prevTap=k,i.tapTime=k.timeStamp}return p}function xr(e,t){var i=e.interaction,n=e.pointer,r=e.event,a=e.eventTarget,u=e.type,s=i.getPointerIndex(n),c=i.pointers[s];if(u==="tap"&&(i.pointerWasMoved||!c||c.downTarget!==a))return[];for(var p=L.getPath(a),v={interaction:i,pointer:n,event:r,eventTarget:a,type:u,path:p,targets:[],node:null},m=0;m<p.length;m++){var b=p[m];v.node=b,t.fire("pointerEvents:collect-targets",v)}return u==="hold"&&(v.targets=v.targets.filter(function(E){var y;return E.eventable.options.holdDuration===((y=i.pointers[s])==null?void 0:y.hold.duration)})),v.targets}function Fn(e){var t=e.interaction,i=e.pointerIndex,n=t.pointers[i].hold;n&&n.timeout&&(clearTimeout(n.timeout),n.timeout=null)}var ma=$t;ct.default=ma;var Ut={};function ya(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.default=void 0;var ba={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(ct.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=ya,e},{"pointerEvents:new":function(e){var t=e.pointerEvent;t.type==="hold"&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var i=e.interaction,n=e.pointerEvent,r=e.eventTarget,a=e.targets;if(n.type==="hold"&&a.length){var u=a[0].eventable.options.holdRepeatInterval;u<=0||(i.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:i,eventTarget:r,type:"hold",pointer:n,event:n},t)},u))}}})};Ut.default=ba;var Gt={};function wa(e){return(0,D.default)(this.events.options,e),this}Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=void 0;var Ea={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=wa;var i=t.prototype._backCompatOption;t.prototype._backCompatOption=function(n,r){var a=i.call(this,n,r);return a===this&&(this.events.options[n]=r),a}},listeners:{"pointerEvents:collect-targets":function(e,t){var i=e.targets,n=e.node,r=e.type,a=e.eventTarget;t.interactables.forEachMatch(n,function(u){var s=u.events,c=s.options;s.types[r]&&s.types[r].length&&u.testIgnoreAllow(c,n,a)&&i.push({node:n,eventable:s,props:{interactable:u}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(i){return t.getRect(i)}},"interactable:set":function(e,t){var i=e.interactable,n=e.options;(0,D.default)(i.events.options,t.pointerEvents.defaults),(0,D.default)(i.events.options,n.pointerEvents||{})}}};Gt.default=Ea;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.default=void 0;var xa={id:"pointer-events",install:function(e){e.usePlugin(ct),e.usePlugin(Ut.default),e.usePlugin(Gt.default)}};Kt.default=xa;var ut={};function Sr(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(i){return function(n,r,a){for(var u=d.default.string(n.target)?$.from(n._context.querySelectorAll(n.target)):[n.target],s=a.window.Promise,c=s?[]:null,p=function(){var m=u[v],b=n.getRect(m);if(!b)return"break";var E=$.find(a.interactions.list,function(C){return C.interacting()&&C.interactable===n&&C.element===m&&C.prepared.name===r.name}),y=void 0;if(E)E.move(),c&&(y=E._reflowPromise||new s(function(C){E._reflowResolve=C}));else{var k=(0,K.tlbrToXywh)(b),M={page:{x:k.x,y:k.y},client:{x:k.x,y:k.y},timeStamp:a.now()},P=A.coordsToEvent(M);y=function(C,R,N,X,Z){var q=C.interactions.new({pointerType:"reflow"}),Y={interaction:q,event:Z,pointer:Z,eventTarget:N,phase:"reflow"};q.interactable=R,q.element=N,q.prevEvent=Z,q.updatePointer(Z,Z,N,!0),A.setZeroCoords(q.coords.delta),(0,se.copyAction)(q.prepared,X),q._doPhase(Y);var ue=C.window.Promise,ye=ue?new ue(function(Wn){q._reflowResolve=Wn}):void 0;return q._reflowPromise=ye,q.start(X,R,N),q._interacting?(q.move(Y),q.end(Z)):(q.stop(),q._reflowResolve()),q.removePointer(Z,Z),ye}(a,n,m,r,P)}c&&c.push(y)},v=0;v<u.length&&p()!=="break";v++);return c&&s.all(c).then(function(){return n})}(this,i,e)}}Object.defineProperty(ut,"__esModule",{value:!0}),ut.install=Sr,ut.default=void 0;var Sa={id:"reflow",install:Sr,listeners:{"interactions:stop":function(e,t){var i=e.interaction;i.pointerType==="reflow"&&(i._reflowResolve&&i._reflowResolve(),$.remove(t.interactions.list,i))}}};ut.default=Sa;var ce={exports:{}};function Pr(e){return(Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(ce.exports,"__esModule",{value:!0}),ce.exports.default=void 0,ie.default.use(Fe.default),ie.default.use(Ce.default),ie.default.use(Kt.default),ie.default.use(Ve.default),ie.default.use(Yt.default),ie.default.use(Tt.default),ie.default.use(xt.default),ie.default.use(we.default),ie.default.use(ut.default),ie.default.use(Ct.default);var Pa=ie.default;if(ce.exports.default=Pa,Pr(ce)==="object"&&ce)try{ce.exports=ie.default}catch(e){}ie.default.default=ie.default,ce=ce.exports;var Le={exports:{}};function kr(e){return(kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}Object.defineProperty(Le.exports,"__esModule",{value:!0}),Le.exports.default=void 0;var ka=ce.default;if(Le.exports.default=ka,kr(Le)==="object"&&Le)try{Le.exports=ce.default}catch(e){}return ce.default.default=ce.default,Le.exports})});Aa(exports,{default:()=>on,genId:()=>Yn});function te(f,o){let l=Object.keys(o).map(h=>La(f,h,o[h]));return l.length===1?l[0]:function(){l.forEach(h=>h())}}function La(f,o,l){let h=f[o],g=f.hasOwnProperty(o),d=g?h:function(){return Object.getPrototypeOf(f)[o].apply(this,arguments)},w=l(d);return h&&Object.setPrototypeOf(w,h),Object.setPrototypeOf(S,w),f[o]=S,x;function S(...O){return w===d&&f[o]===S&&x(),w.apply(this,O)}function x(){f[o]===S&&(g?f[o]=d:delete f[o]),w!==d&&(w=d,Object.setPrototypeOf(S,h||Function))}}var H=Ue(require("obsidian"));var Se=Ue(require("obsidian"));var W=Ue(require("obsidian"));function Vn(f){let o=Mr(),[l,h]=o(f);if(!l)return!1;if(h||(h="px"),["em","ex","ch","rem","vw","vh","vmin","vmax","%","cm","mm","in","px","pt","pc"].contains(h))return l+h}function de(f,o){var l;return f instanceof o||((l=f==null?void 0:f.instanceOf)==null?void 0:l.call(f,o))}var Cr=10,Nn=60;function Ge(f){let o=f.body.querySelector(".app-container, .workspace-split"),l=f.body.querySelector(".mod-left.workspace-ribbon"),h=o.offsetTop,g=f.body.hasClass("hider-ribbon")?0:l?l.offsetWidth:0;return{top:h,left:g}}function Ia(f){let o=f.getAttribute("data-orig-height"),l=f.getAttribute("data-orig-width"),h=parseFloat(f.getAttribute("data-orig-pos-left")||"0"),g=parseFloat(f.getAttribute("data-orig-pos-top")||"0"),d=Ge(f.ownerDocument).top;return g<d&&(g=d),{height:o,width:l,top:g,left:h}}function Ke(f,o){let{height:l,width:h,top:g,left:d}=Ia(f);o||(f.removeAttribute("data-orig-width"),f.removeAttribute("data-orig-height"),f.removeAttribute("data-orig-pos-left"),f.removeAttribute("data-orig-pos-top")),h&&(f.style.width=h+"px"),l&&(f.style.height=l+"px"),g&&(f.style.top=g+"px",f.setAttribute("data-y",String(g))),d&&(f.style.left=d+"px")}function Jt(f){if(f.hasClass("snap-to-viewport")){f.removeClass("snap-to-viewport"),Ke(f);return}}function Bn(f,o){let l=f.querySelector(".view-content").offsetHeight;l=o?-l:l;let h=parseFloat(f.getAttribute("data-y")||"0")+l;f.style.top=h+"px",f.setAttribute("data-y",String(h))}function dt(f){f.hasAttribute("data-orig-width")||f.setAttribute("data-orig-width",String(f.offsetWidth)),f.hasAttribute("data-orig-height")||f.setAttribute("data-orig-height",String(f.offsetHeight)),f.hasAttribute("data-orig-pos-left")||f.setAttribute("data-orig-pos-left",String(parseFloat(f.style.left))),f.hasAttribute("data-orig-pos-top")||f.setAttribute("data-orig-pos-top",String(parseFloat(f.style.top)))}function Ar(f){return f.hasAttribute("data-orig-width")&&f.hasAttribute("data-orig-height")&&f.hasAttribute("data-orig-pos-left")&&f.hasAttribute("data-orig-pos-top")}function qn(f){let o=f.target,l=f.client.x-f.rect.left,h=f.rect.width,g=l/h,d=o.offsetWidth,w=String(f.client.x-g*d),S=String(f.client.y);o.setAttribute("data-x",String(w)),o.setAttribute("data-y",String(S))}function Ie(f,o,l){f.addClass(`snap-to-${o}`),f.style.top=l.top+"px",f.style.height=`calc(100vh - ${l.top}px)`,f.style.left=o==="right"?"unset":l.left+"px",o==="viewport"&&(f.style.width=`calc(100vw - ${l.left}px)`)}function Dr(f){let o=f.target,{x:l,y:h}=o.dataset;if(l=l||o.style.left,h=h||o.style.top,l=String((parseFloat(l)||0)+f.dx),h=String((parseFloat(h)||0)+f.dy),this.plugin.settings.snapToEdges){let g,d=o.ownerDocument,w=f.client.x<Cr,S=f.client.x>d.body.offsetWidth-Cr,x=f.client.y<30;if((w||S||x)&&(g=Ge(d),dt(o)),w&&f.buttons){Ie(o,"left",g);return}else if(S&&f.buttons){Ie(o,"right",g);return}else if(x&&f.buttons){Ie(o,"viewport",g);return}else if(o.hasClass("snap-to-viewport")){if(f.client.y<Nn)return;o.removeClass("snap-to-viewport"),Ke(o),qn(f);return}else if(o.hasClass("snap-to-left")){if(f.client.y<Nn)return;o.removeClass("snap-to-left"),Ke(o),qn(f);return}else if(o.hasClass("snap-to-right")){if(f.client.y<Nn)return;o.removeClass("snap-to-right"),Ke(o),qn(f);return}}o.style.top=h?h+"px":o.style.top,o.style.left=l?l+"px":o.style.left,o.setAttribute("data-x",String(l)),o.setAttribute("data-y",String(h))}var Lr=["left","right","viewport"],Ir=(f,o)=>{var h;let l=(h=U.activePopover)==null?void 0:h.hoverEl;if(l&&de(l,HTMLElement)){if(!o){Ar(l)?Ke(l,!0):dt(l),l.removeClasses(["snap-to-left","snap-to-right","snap-to-viewport"]);let g=Ge(l.ownerDocument);Ie(l,f,g)}return!0}return!1},jr=f=>{var l;let o=(l=U.activePopover)==null?void 0:l.hoverEl;return o&&de(o,HTMLElement)?(f||Ar(o)&&(o.removeClasses(["snap-to-left","snap-to-right","snap-to-viewport"]),Ke(o)),!0):!1},Rr=f=>{var h;let o=(h=U.activePopover)==null?void 0:h.hoverEl,l=U.activePopovers().find(g=>g.hoverEl===o);return l?(f||l.toggleMinimized(),!0):!1};var Qt=new WeakMap,pt={x:0,y:0};function ja(f){let o=function(){return Object.setPrototypeOf(new W.Component,new.target.prototype)};return o.prototype=f.prototype,Object.setPrototypeOf(o,f)}var Xn=new WeakMap,zr,Fr,Wr,Vr,Nr,U=class extends ja(W.HoverPopover){constructor(o,l,h,g,d){super();this.targetEl=l;this.plugin=h;this.onShowCallback=d;this.isPinned=this.plugin.settings.autoPin==="always";this.abortController=this.addChild(new W.Component);this.detaching=!1;this.opening=!1;this.rootSplit=new W.WorkspaceSplit(window.app.workspace,"vertical");this.targetRect=(zr=this.targetEl)==null?void 0:zr.getBoundingClientRect();this.oldPopover=(Fr=this.parent)==null?void 0:Fr.hoverPopover;this.document=(Nr=(Vr=(Wr=this.targetEl)==null?void 0:Wr.ownerDocument)!=null?Vr:window.activeDocument)!=null?Nr:window.document;this.interactStatic=this.plugin.interact.forDom(this.document.body).interact;this.id=Yn(8);this.dockedToSidebar=!1;this.sidebarContainer=null;this.hoverEl=this.document.defaultView.createDiv({cls:"popover hover-popover",attr:{id:"he"+this.id}});this.activate=(0,W.debounce)(()=>{let{win:o}=this.document,l=Xn.get(o);l||Xn.set(o,l=new Set),l.delete(this),l.add(this),o.requestAnimationFrame(()=>{let h=41;Array.from(l).reverse().forEach(g=>{g.hoverEl.style.setProperty("--he-popover-layer-inactive",""+h),h>31&&h--})})},100);g===void 0&&(g=300),this.onTarget=!0,this.onHover=!1,this.shownPos=null,this.parent=o,this.waitTime=g,this.state=W.PopoverState.Showing;let{hoverEl:w}=this;this.onMouseIn=this._onMouseIn.bind(this),this.onMouseOut=this._onMouseOut.bind(this),this.abortController.load(),l&&(l.addEventListener("mouseover",this.onMouseIn),l.addEventListener("mouseout",this.onMouseOut)),w.addEventListener("mouseover",x=>{en(x,w)&&(this.onHover=!0,this.onTarget=!1,this.transition())}),w.addEventListener("mouseout",x=>{en(x,w)&&(this.onHover=!1,this.onTarget=!1,this.transition())}),this.timer=window.setTimeout(this.show.bind(this),g),this.document.addEventListener("mousemove",ht),Qt.set(this.hoverEl,this),this.hoverEl.addClass("hover-editor"),this.containerEl=this.hoverEl.createDiv("popover-content"),this.buildWindowControls(),this.setInitialDimensions();let S=this.pinEl=this.document.defaultView.createEl("a","popover-header-icon mod-pin-popover");this.titleEl.prepend(this.pinEl),S.onclick=()=>{this.togglePin()},(0,W.setIcon)(S,"lucide-pin"),this.createResizeHandles(),this.plugin.settings.imageZoom&&this.registerZoomImageHandlers()}static activeWindows(){let o=[window],{floatingSplit:l}=app.workspace;if(l)for(let h of l.children)h.win&&o.push(h.win);return o}static containerForDocument(o){if(o!==document&&app.workspace.floatingSplit){for(let l of app.workspace.floatingSplit.children)if(l.doc===o)return l}return app.workspace.rootSplit}static activePopovers(){return this.activeWindows().flatMap(this.popoversForWindow)}static popoversForWindow(o){var l,h;return Array.prototype.slice.call((h=(l=o==null?void 0:o.document)==null?void 0:l.body.querySelectorAll(".hover-popover"))!=null?h:[]).map(g=>Qt.get(g)).filter(g=>g)}static forLeaf(o){let l=o&&document.body.matchParent.call(o.containerEl,".hover-popover");return l?Qt.get(l):void 0}static iteratePopoverLeaves(o,l){for(let h of this.activePopovers())if(h.rootSplit&&o.iterateLeaves(l,h.rootSplit))return!0;return!1}adopt(o){if(this.targetEl===o)return!0;let l=o==null?void 0:o.getBoundingClientRect();if(Hr(this.targetRect,l)){this.targetEl.removeEventListener("mouseover",this.onMouseIn),this.targetEl.removeEventListener("mouseout",this.onMouseOut),o.addEventListener("mouseover",this.onMouseIn),o.addEventListener("mouseout",this.onMouseOut),this.targetEl=o,this.targetRect=l;let{x:h,y:g}=pt;return this.onTarget=Hr(l,{left:h,right:h,top:g,bottom:g}),this.transition(),!0}else this.onTarget=!1,this.transition();return!1}onZoomOut(){this.document.body.removeEventListener("mouseup",this.boundOnZoomOut),this.document.body.removeEventListener("dragend",this.boundOnZoomOut),this.hoverEl.hasClass("do-not-restore")?this.hoverEl.removeClass("do-not-restore"):Jt(this.hoverEl)}onZoomIn(o){if(o.button!==0)return;this.hoverEl.hasClass("snap-to-viewport")&&this.hoverEl.addClass("do-not-restore"),this.document.body.addEventListener("mouseup",this.boundOnZoomOut,{once:!0}),this.document.body.addEventListener("dragend",this.boundOnZoomOut,{once:!0});let l=Ge(this.document);return dt(this.hoverEl),Ie(this.hoverEl,"viewport",l),!1}registerZoomImageHandlers(){this.hoverEl.addClass("image-zoom"),this.boundOnZoomOut=this.onZoomOut.bind(this),this.hoverEl.on("mousedown","img",this.onZoomIn.bind(this))}togglePin(o){var l;this.activate(),o===void 0&&(o=!this.isPinned),o&&((l=this.abortController)==null||l.unload()),this.hoverEl.toggleClass("is-pinned",o),this.pinEl.toggleClass("is-active",o),this.isPinned=o}getDefaultMode(){var o,l;return((l=(o=this.parent)==null?void 0:o.view)==null?void 0:l.getMode)?this.parent.view.getMode():"preview"}updateLeaves(){this.onTarget&&this.targetEl&&!this.document.contains(this.targetEl)&&(this.onTarget=!1,this.transition());let o=0;this.plugin.app.workspace.iterateLeaves(l=>{o++},this.rootSplit),o===0?this.hide():o>1&&this.toggleConstrainAspectRatio(!1),this.hoverEl.setAttribute("data-leaf-count",o.toString())}get headerHeight(){let o=this.hoverEl;return this.titleEl.getBoundingClientRect().bottom-o.getBoundingClientRect().top}toggleMinimized(){var h;this.activate();let o=this.hoverEl,l=this.headerHeight;if(!o.hasAttribute("data-restore-height"))this.plugin.settings.rollDown&&Bn(o,!1),o.setAttribute("data-restore-height",String(o.offsetHeight)),o.style.minHeight=l+"px",o.style.maxHeight=l+"px",o.toggleClass("is-minimized",!0);else{let g=o.getAttribute("data-restore-height");g&&(o.removeAttribute("data-restore-height"),o.style.height=g+"px"),o.style.removeProperty("max-height"),o.toggleClass("is-minimized",!1),this.plugin.settings.rollDown&&Bn(o,!0)}(h=this.interact)==null||h.reflow({name:"drag",axis:"xy"})}attachLeaf(){this.rootSplit.getRoot=()=>app.workspace[this.document===document?"rootSplit":"floatingSplit"],this.rootSplit.getContainer=()=>U.containerForDocument(this.document),this.titleEl.insertAdjacentElement("afterend",this.rootSplit.containerEl);let o=te(this.plugin.app.workspace,{setActiveLeaf(){return()=>{}}}),l;try{l=this.plugin.app.workspace.createLeafInParent(this.rootSplit,0)}finally{o()}return this.updateLeaves(),l}onload(){super.onload(),this.registerEvent(this.plugin.app.workspace.on("layout-change",this.updateLeaves,this)),this.registerEvent(app.workspace.on("layout-change",()=>{this.rootSplit.children.forEach((o,l)=>{o instanceof W.WorkspaceTabs&&this.rootSplit.replaceChild(l,o.children[0])})}))}leaves(){let o=[];return this.plugin.app.workspace.iterateLeaves(l=>{o.push(l)},this.rootSplit),o}setInitialDimensions(){this.hoverEl.style.height=this.plugin.settings.initialHeight,this.hoverEl.style.width=this.plugin.settings.initialWidth}adjustHeight(o){this.hoverEl.style.height=this.hoverEl.offsetHeight+o+"px"}toggleViewHeader(o,l){var d;this.activate(),o===void 0&&(o=!this.hoverEl.hasClass("show-navbar")),(d=this.hideNavBarEl)==null||d.toggleClass("is-active",o),this.hoverEl.toggleClass("show-navbar",o);let h=this.hoverEl.querySelector(".view-header");if(!h||l)return;let g=parseFloat(getComputedStyle(h).getPropertyValue("--he-view-header-height"));this.hoverEl.style.transition="height 0.2s",this.adjustHeight(o?g:-g),setTimeout(()=>{this.hoverEl.style.removeProperty("transition")},200),this.requestLeafMeasure()}buildWindowControls(){this.titleEl=this.document.defaultView.createDiv("popover-titlebar"),this.titleEl.createDiv("popover-title");let o=this.titleEl.createDiv("popover-actions"),l=this.hideNavBarEl=o.createEl("a","popover-action mod-show-navbar");(0,W.setIcon)(l,"sidebar-open"),l.addEventListener("click",w=>{this.toggleViewHeader()}),this.plugin.settings.showViewHeader&&this.toggleViewHeader(!0,!0);let h=o.createEl("a","popover-action mod-minimize");(0,W.setIcon)(h,"minus"),h.addEventListener("click",w=>{Jt(this.hoverEl),this.toggleMinimized()});let g=o.createEl("a","popover-action mod-maximize");(0,W.setIcon)(g,"maximize"),g.addEventListener("click",w=>{if(this.activate(),this.hoverEl.hasClass("snap-to-viewport")){(0,W.setIcon)(g,"maximize"),Jt(this.hoverEl);return}(0,W.setIcon)(g,"minimize");let S=Ge(this.document);dt(this.hoverEl),Ie(this.hoverEl,"viewport",S)});let d=o.createEl("a","popover-action mod-close");(0,W.setIcon)(d,"x"),d.addEventListener("click",w=>{this.hide()}),this.containerEl.prepend(this.titleEl)}requestLeafMeasure(){let o=this.leaves();o.length&&setTimeout(()=>{o.forEach(l=>l.onResize())},200)}onShow(){var l,h;let{closeDelay:o}=this.plugin.settings;setTimeout(()=>this.waitTime=o,o),(l=this.oldPopover)==null||l.hide(),this.oldPopover=null,this.activate(),this.hoverEl.toggleClass("is-new",!0),this.document.body.addEventListener("click",()=>{this.hoverEl.toggleClass("is-new",!1)},{once:!0,capture:!0}),this.parent&&(this.parent.hoverPopover=this),(0,W.requireApiVersion)("0.15.1")&&!(0,W.requireApiVersion)("0.15.7")&&app.workspace.iterateLeaves(g=>{var d,w;g.view instanceof W.MarkdownView&&((w=(d=g.view.editMode).reinit)==null||w.call(d))},this.rootSplit),this.togglePin(this.isPinned),(h=this.onShowCallback)==null||h.call(this),this.onShowCallback=void 0}startBounce(){this.bounce=setTimeout(()=>{this.hoverEl.style.left=parseFloat(this.hoverEl.style.left)+this.xspeed+"px",this.hoverEl.style.top=parseFloat(this.hoverEl.style.top)+this.yspeed+"px",this.checkHitBox(),this.startBounce()},20)}toggleBounce(){if(this.xspeed=7,this.yspeed=7,this.bounce){clearTimeout(this.bounce),this.bounce=void 0;let o=this.hoverEl.querySelector(".view-content");(o==null?void 0:o.style)&&o.style.removeProperty("backgroundColor")}else this.startBounce()}checkHitBox(){let o=parseFloat(this.hoverEl.style.left),l=parseFloat(this.hoverEl.style.top),h=parseFloat(this.hoverEl.style.width),g=parseFloat(this.hoverEl.style.height);(o<=0||o+h>=this.document.body.offsetWidth)&&(this.xspeed*=-1,this.pickColor()),(l<=0||l+g>=this.document.body.offsetHeight)&&(this.yspeed*=-1,this.pickColor())}pickColor(){let o=Math.random()*(254-0)+0,l=Math.random()*(254-0)+0,h=Math.random()*(254-0)+0,g=this.hoverEl.querySelector(".view-content");(g==null?void 0:g.style)&&(g.style.backgroundColor="rgb("+o+","+l+", "+h+")")}transition(){this.shouldShow()?this.state===W.PopoverState.Hiding&&(this.state=W.PopoverState.Shown,clearTimeout(this.timer)):this.state===W.PopoverState.Showing?this.hide():this.state===W.PopoverState.Shown&&(this.state=W.PopoverState.Hiding,this.timer=window.setTimeout(()=>{this.shouldShow()?this.transition():this.hide()},this.waitTime))}detect(o){let{targetEl:l,hoverEl:h}=this;l&&(this.onTarget=o===l||l.contains(o)),this.onHover=o===h||h.contains(o)}_onMouseIn(o){this.targetEl&&!en(o,this.targetEl)||(this.onTarget=!0,this.transition())}_onMouseOut(o){this.targetEl&&!en(o,this.targetEl)||(this.onTarget=!1,this.transition())}position(o){if(this.dockedToSidebar&&this.sidebarContainer)return;o===void 0&&(o=this.shownPos);let l;if(o)l={top:o.y-10,bottom:o.y+10,left:o.x,right:o.x};else if(this.targetEl){let h=Ha(this.targetEl,this.document.body);l={top:h.top,bottom:h.top+this.targetEl.offsetHeight,left:h.left,right:h.left+this.targetEl.offsetWidth}}else l={top:0,bottom:0,left:0,right:0};this.document.body.appendChild(this.hoverEl),Ra(l,this.hoverEl,{gap:10},this.document),o&&setTimeout(()=>{let h=parseFloat(this.hoverEl.style.left),g=parseFloat(this.hoverEl.style.top);this.hoverEl.setAttribute("data-x",String(h)),this.hoverEl.setAttribute("data-y",String(g))},0)}shouldShow(){return this.shouldShowSelf()||this.shouldShowChild()}shouldShowChild(){return U.activePopovers().some(o=>o!==this&&o.targetEl&&this.hoverEl.contains(o.targetEl)?o.shouldShow():!1)}shouldShowSelf(){return!this.detaching&&!!(this.onTarget||this.onHover||this.state==W.PopoverState.Shown&&this.isPinned||this.document.querySelector(`body>.modal-container, body > #he${this.id} ~ .menu, body > #he${this.id} ~ .suggestion-container`))}calculateMinSize(){return{width:40,height:this.headerHeight}}calculateBoundaries(o,l,h){let g=h.element.closest("body"),d=(g==null?void 0:g.querySelector(".workspace"))||(g==null?void 0:g.querySelector(".workspace-window"));return d==null?void 0:d.getBoundingClientRect()}calculateMaxSize(o,l,h){return{width:this.document.body.offsetWidth,height:this.document.body.offsetHeight}}toggleConstrainAspectRatio(o,l){let h=this.resizeModifiers.find(g=>g.name=="aspectRatio");!h||(o===void 0&&(o=!h.options.enabled),o?(h.enable(),this.constrainAspectRatio=!0,l!==void 0&&h.options.ratio!==l&&(h.options.ratio=l)):(h.disable(),this.constrainAspectRatio=!1))}registerInteract(){var O,T;let o=this.document.querySelector("div.app-container, div.workspace-split"),l=this,h=function(_,z,j){let{top:B,right:I,bottom:V,left:Q,x:le,y:G,width:ee,height:an}=o.getBoundingClientRect(),L={top:B,right:I,bottom:V,left:Q,x:le,y:G,width:ee,height:an};return j.pointerType==="reflow"?l.dragElementRect.bottom=1:l.dragElementRect.bottom=0,l.plugin.settings.snapToEdges&&(L.top=B-30),L.bottom=V-l.headerHeight,L},g=!0,d,w=((O=this.hoverEl.dataset)==null?void 0:O.imgRatio)?parseFloat((T=this.hoverEl.dataset)==null?void 0:T.imgRatio):void 0;this.resizeModifiers=[this.interactStatic.modifiers.restrictEdges({outer:l.calculateBoundaries.bind(this)}),this.interactStatic.modifiers.restrictSize({min:l.calculateMinSize.bind(this),max:l.calculateMaxSize.bind(this)}),this.interactStatic.modifiers.aspectRatio({ratio:w||"preserve",enabled:!1})],this.dragElementRect={top:0,left:1,bottom:0,right:0};let S=[this.interactStatic.modifiers.restrict({restriction:h,offset:{top:0,left:40,bottom:0,right:40},elementRect:this.dragElementRect,endOnly:!1})];this.constrainAspectRatio&&w!==void 0&&this.toggleConstrainAspectRatio(!0,w);let x=this.interactStatic(this.hoverEl).preventDefault("always").on("doubletap",this.onDoubleTap.bind(this)).draggable({modifiers:S,allowFrom:".popover-titlebar",listeners:{start(_){_.buttons&&l.togglePin(!0),_.buttons&&de(_.target,HTMLElement)&&(_.target.addClass("is-dragging"),l.activate())},end(_){de(_.target,HTMLElement)&&_.target.removeClass("is-dragging")},move:Dr.bind(l)}}).resizable({edges:{top:".top-left, .top-right, .top",left:".top-left, .bottom-left, .left",bottom:".bottom-left, .bottom-right, .bottom",right:".top-right, .bottom-right, .right"},modifiers:this.resizeModifiers,listeners:{start(_){var I;let z=_.target;l.activate(),z.style.removeProperty("max-height");let j=(I=l.hoverEl.querySelector(".view-header"))==null?void 0:I.offsetHeight;d=l.titleEl.offsetHeight+j,g=!0,_.buttons&&l.togglePin(!0)},move:function(_){var Q,le,G;if(!(_==null?void 0:_.deltaRect)||!_.edges)return;let{target:z}=_,{x:j,y:B}=z.dataset,I=_.rect.height,V=_.rect.width;j=j||z.style.left,B=B||z.style.top,j=String((parseFloat(j)||0)+((Q=_.deltaRect)==null?void 0:Q.left)),B=String((parseFloat(B)||0)+((le=_.deltaRect)==null?void 0:le.top)),l.constrainAspectRatio&&w&&_.buttons!==void 0?(g&&(_.edges.top&&(_.edges.right||_.edges.left)?B=String(parseFloat(B)-d):_.edges.top?j=String(parseFloat(j)+d*w):_.edges.left&&!(_.edges.top||_.edges.bottom)&&(B=String(parseFloat(B)-d))),g=!1,(_.edges.top&&!(_.edges.right||_.edges.left)||_.edges.bottom&&!(_.edges.right||_.edges.left))&&(I=I-d,V=V-d*w),I=I+d,(z.hasClass("snap-to-left")||z.hasClass("snap-to-right"))&&(B=String(parseFloat(z.style.top)),j=String(parseFloat(z.style.left)))):w&&I>((G=this==null?void 0:this.document)==null?void 0:G.body.offsetHeight)&&(I=I/1.5,V=I*w),Object.assign(z.style,{width:`${V}px`,height:`${I}px`,top:`${B}px`,left:j==="NaN"?"unset":`${j}px`}),Object.assign(z.dataset,{x:j,y:B})},end:function(_){_.rect.height>l.headerHeight&&_.target.removeAttribute("data-restore-height"),x.reflow({name:"drag",axis:"xy"})}}});this.interact=x}createResizeHandles(){this.hoverEl.createDiv("resize-handle bottom-left"),this.hoverEl.createDiv("resize-handle bottom-right"),this.hoverEl.createDiv("resize-handle top-left"),this.hoverEl.createDiv("resize-handle top-right"),this.hoverEl.createDiv("resize-handle right"),this.hoverEl.createDiv("resize-handle left"),this.hoverEl.createDiv("resize-handle bottom"),this.hoverEl.createDiv("resize-handle top")}onDoubleTap(o){o.target.tagName==="DIV"&&o.target.closest(".popover-titlebar")&&(o.preventDefault(),this.togglePin(!0),this.toggleMinimized())}show(){var o,l;if(this.dockedToSidebar&&this.sidebarContainer){this.state=W.PopoverState.Shown,this.timer=0,this.shownPos=pt,this.sidebarContainer.appendChild(this.hoverEl),this.onShow(),app.workspace.onLayoutChange(),this.load(),this.hoverEl.dataset.imgHeight&&this.hoverEl.dataset.imgWidth&&(this.hoverEl.style.height=parseFloat(this.hoverEl.dataset.imgHeight)+this.titleEl.offsetHeight+"px",this.hoverEl.style.width=parseFloat(this.hoverEl.dataset.imgWidth)+"px");return}!this.targetEl||this.document.body.contains(this.targetEl)?(this.state=W.PopoverState.Shown,this.timer=0,this.shownPos=pt,this.position(pt),this.document.removeEventListener("mousemove",ht),this.onShow(),app.workspace.onLayoutChange(),this.load()):this.hide(),this.hoverEl.dataset.imgHeight&&this.hoverEl.dataset.imgWidth&&(this.hoverEl.style.height=parseFloat(this.hoverEl.dataset.imgHeight)+this.titleEl.offsetHeight+"px",this.hoverEl.style.width=parseFloat(this.hoverEl.dataset.imgWidth)+"px"),this.registerInteract(),(o=this.interact)==null||o.reflow({name:"resize",edges:{right:!0,bottom:!0}}),(l=this.interact)==null||l.reflow({name:"drag",axis:"xy"})}onHide(){var o;this.oldPopover=null,((o=this.parent)==null?void 0:o.hoverPopover)===this&&(this.parent.hoverPopover=null)}hide(){var l,h,g;if(this.onTarget=this.onHover=!1,this.isPinned=!1,this.detaching=!0,(l=Xn.get(this.document.win))==null||l.delete(this),this.document.removeEventListener("mousemove",ht),this.timer&&(clearTimeout(this.timer),this.timer=0),this.hoverEl.hide(),this.opening)return;let o=this.leaves();if(o.length)o.forEach(d=>{d.view instanceof W.MarkdownView&&!this._loaded&&(d.view.onMarkdownFold=()=>null),d.detach(),d===app.workspace.activeLeaf&&(app.workspace.activeLeaf=null)});else return this.parent=null,((h=this.interact)==null?void 0:h.unset)&&this.interact.unset(),(g=this.abortController)==null||g.unload(),this.abortController=void 0,this.interact=void 0,this.nativeHide()}nativeHide(){var h;let{hoverEl:o,targetEl:l}=this;if(this.state=W.PopoverState.Hidden,o.detach(),l){let g=l.matchParent(".hover-popover");g&&((h=Qt.get(g))==null||h.transition()),l.removeEventListener("mouseover",this.onMouseIn),l.removeEventListener("mouseout",this.onMouseOut)}this.onHide(),this.unload()}resolveLink(o,l){let h=(0,W.parseLinktext)(o);return h?this.plugin.app.metadataCache.getFirstLinkpathDest(h.path,l):null}async openLink(o,l,h,g){var j,B,I;let d=this.resolveLink(o,l),w=(0,W.parseLinktext)(o);if(!d&&g){let V=this.plugin.app.fileManager.getNewFileParent(l);d=await this.plugin.app.fileManager.createNewMarkdownFile(V,w.path)}if(!d){this.displayCreateFileAction(o,l,h);return}let{viewRegistry:S}=this.plugin.app,x=S.typeByExtension[d.extension];if(!x||!S.viewByType[x]){this.displayOpenFileAction(d);return}h=Object.assign(this.buildEphemeralState(d,w),h);let O=this.getDefaultMode(),T=this.buildState(O,h),_=await this.openFile(d,T,g),z=(j=_==null?void 0:_.view)==null?void 0:j.getViewType();if(z==="image"){this.plugin.settings.autoFocus&&((B=this.parent)==null?void 0:B.hasOwnProperty("editorEl"))&&this.parent.editorEl.hasClass("is-live-preview")&&(this.waitTime=3e3),this.constrainAspectRatio=!0;let V=_.view.contentEl.querySelector("img");this.hoverEl.dataset.imgHeight=String(V.naturalHeight),this.hoverEl.dataset.imgWidth=String(V.naturalWidth),this.hoverEl.dataset.imgRatio=String(V.naturalWidth/V.naturalHeight)}else z==="pdf"&&(this.hoverEl.style.height="800px",this.hoverEl.style.width="600px");((I=T.state)==null?void 0:I.mode)==="source"&&this.whenShown(()=>{var V,Q,le,G;(0,W.requireApiVersion)("1.0")&&((le=(Q=(V=_==null?void 0:_.view)==null?void 0:V.editMode)==null?void 0:Q.reinit)==null||le.call(Q)),(G=_==null?void 0:_.view)==null||G.setEphemeralState(T.eState)})}displayOpenFileAction(o){let h=this.attachLeaf().view;h.emptyTitleEl.hide(),h.actionListEl.empty();let{actionListEl:g}=h;g.createDiv({cls:"file-embed-title"},d=>{d.createSpan({cls:"file-embed-icon"},w=>(0,W.setIcon)(w,"document")),d.appendText(" "+o.name)}),g.addEventListener("click",()=>this.plugin.app.openWithDefaultApp(o.path)),g.setAttribute("aria-label",i18next.t("interface.embed-open-in-default-app-tooltip"))}displayCreateFileAction(o,l,h){var w,S,x;let g=this.attachLeaf(),d=g.view;if(d){(w=d.emptyTitleEl)==null||w.hide(),(S=d.actionListEl)==null||S.empty();let O=(x=d.actionListEl)==null?void 0:x.createEl("button","empty-state-action");if(!O)return;O.textContent=`${o} is not yet created. Click to create.`,this.plugin.settings.autoFocus&&setTimeout(()=>{O==null||O.focus()},200),O.addEventListener("click",async()=>{this.togglePin(!0),await this.openLink(o,l,h,g)},{once:!0})}}whenShown(o){if(this.detaching)return;let l=this.onShowCallback;this.onShowCallback=()=>{this.detaching||(o(),typeof l=="function"&&l())},this.state===W.PopoverState.Shown&&(this.onShowCallback(),this.onShowCallback=void 0)}async openFile(o,l,h){var d,w,S;if(this.detaching)return;let g=h!=null?h:this.attachLeaf();this.opening=!0;try{if(await g.openFile(o,l),this.plugin.settings.autoFocus&&!this.detaching)this.whenShown(()=>{app.workspace.setActiveLeaf(g,!1,!1),app.workspace.activeLeaf===g&&g.setEphemeralState({focus:!0}),setTimeout(te(W.Workspace.prototype,{recordMostRecentOpenedFile(O){return function(T){if(T!==o)return O.call(this,T)}}}),1);let x=this.plugin.app.plugins.plugins["recent-files-obsidian"];x&&setTimeout(te(x,{shouldAddFile(O){return function(T){return T!==o&&O.call(this,T)}},update(O){return function(T){return O.call(this,T===o?null:T)}}}),1)});else if(!this.plugin.settings.autoFocus&&!this.detaching){let x=this.hoverEl.querySelector(".popover-title");if(!x)return;x.textContent=(d=g.view)==null?void 0:d.getDisplayText(),x.setAttribute("data-path",(S=(w=g.view)==null?void 0:w.file)==null?void 0:S.path)}}catch(x){console.error(x)}finally{this.opening=!1,this.detaching&&this.hide()}return g}buildState(o,l){let g=this.plugin.settings.defaultMode==="match"?o:this.plugin.settings.defaultMode;return{active:!1,state:{mode:g},eState:l}}buildEphemeralState(o,l){let h=this.plugin.app.metadataCache.getFileCache(o),g=h?(0,W.resolveSubpath)(h,(l==null?void 0:l.subpath)||""):void 0,d={subpath:l==null?void 0:l.subpath};return g&&(d.line=g.start.line,d.startLoc=g.start,d.endLoc=g.end||void 0),d}};function ft(f){return f.containerEl.matches(".popover.hover-popover.hover-editor .workspace-leaf")}function Ra(f,o,l,h){l=l||{},o.show();let g=l.gap||0,d=l.preference||"bottom",w=l.offsetParent||o.offsetParent||h.documentElement,S=l.horizontalAlignment||"left",x=w.scrollTop+10,O=w.scrollTop+w.clientHeight-10,T=Math.min(f.top,O),_=Math.max(f.bottom,x),z=o.offsetHeight,j=f.top-x>=z+g,B=O-f.bottom>=z+g,I=0,V="";!j||d!=="top"&&B?!B||d!=="bottom"&&j?w.clientHeight<z+g?(I=x,V="overlap"):d==="top"?(I=x+g,V="overlap"):(I=O-z,V="overlap"):(I=_+g,V="bottom"):(I=T-g-z,V="top");let Q=w.scrollLeft+10,le=w.scrollLeft+w.clientWidth-10,G=o.offsetWidth,ee=S==="left"?f.left:f.right-G;return ee<Q?ee=Q:ee>le-G&&(ee=le-G),o.style.top="".concat(I.toString(),"px"),o.style.left="".concat(ee.toString(),"px"),{top:I,left:ee,vresult:V}}function Ha(f,o){let l=0,h=0;for(let g=o?o.offsetParent:null;f&&f!==o&&f!==g;){l+=f.offsetTop,h+=f.offsetLeft;let d=f.offsetParent;for(let w=f.parentElement;w&&w!==d;)l-=w.scrollTop,h-=w.scrollLeft,w=w.parentElement;d&&d!==o&&d!==g&&(l-=d.scrollTop,h-=d.scrollLeft),f=d}return{top:l,left:h}}function ht(f){pt={x:f.clientX,y:f.clientY}}function en(f,o){let l=f.relatedTarget;return!(de(l,Node)&&o.contains(l))}function Hr(f,o){return!!(f&&o&&f.right>o.left&&f.left<o.right&&f.bottom>o.top&&f.top<o.bottom)}var tn=new WeakMap;function Br(f,o,l,h,g,d,...w){var O;l&&l.matches('.workspace-leaf-content[data-type="calendar"] table.calendar td > div')&&(l=l.parentElement),d&&"scroll"in d&&!("line"in d)&&l&&l.matches(".search-result-file-match")&&(d.line=d.scroll,delete d.scroll),l&&l.matches(".bookmark .tree-item-inner")&&(o&&o.innerEl===l&&(o=o.tree),l=(O=l.parentElement)!=null?O:l);let S=tn.has(l)?tn.get(l):o.hoverPopover;if(S==null?void 0:S.lockedOut)return;if(S&&S.state!==Se.PopoverState.Hidden&&(!S.isPinned||f.settings.autoPin==="always")&&S.targetEl!==null&&S.originalLinkText===h&&S.originalPath===g&&l&&S.adopt(l))tn.set(l,S);else{let T=new U(o,l,f,f.settings.triggerDelay);l&&tn.set(l,T),T.originalLinkText=h,T.originalPath=g,o.hoverPopover=T;let _=T.abortController,z=function(){!T||(T.lockedOut=!1)},j=function(V){!T||de(V.target,HTMLElement)&&!V.target.closest(".hover-editor, .menu")&&(T.state=Se.PopoverState.Hidden,T.hide(),T.lockedOut=!0,setTimeout(z,1e3))},{document:B}=T,I=function(V){if(!T)return;let Q=Se.Platform.isMacOS?"Meta":"Control";!T.onHover&&T.state!==Se.PopoverState.Shown&&V.key!==Q?(T.state=Se.PopoverState.Hidden,T.hide(),T.lockedOut=!0,setTimeout(z,1e3)):B.body.removeEventListener("keyup",I,!0)};B.addEventListener("pointerdown",j,!0),B.addEventListener("mousedown",j,!0),B.body.addEventListener("keyup",I,!0),_.register(()=>{B.removeEventListener("pointerdown",j,!0),B.removeEventListener("mousedown",j,!0),B.body.removeEventListener("keyup",I,!0)}),setTimeout(()=>{(T==null?void 0:T.state)!=Se.PopoverState.Hidden&&(T==null||T.openLink(h,g,d))},0)}}var Pe=Ue(require("obsidian"));var $n="use.me",Un="use.factory",Ze,vt,Gn=function(){return Object.defineProperties(f(),{this:{get(){if(Ze)return Ze;throw new TypeError("No current context")}},me:{value:$n},factory:{value:Un}});function f(g){let d=new Map;d.prev=g;let w=Object.assign(g?x=>{let O=d.get(x);if(!O){for(let j=d.prev;j;j=j.prev)if(O=j.get(x)){O=Object.assign(Object.assign({},O),{s:O.s||1});break}O=O||{s:2,v:l},d.set(x,O)}let T,_,z;for(;;)switch(O.s){case 0:return Ze===w&&vt&&vt.push(x),O.v;case 1:if(T=O.d,!T||S(()=>T.k.every(j=>w(j)===T.c(j)))){O.s=0;break}O.v=T.f;case 2:O.s=4;try{o(d,x,0,S(_=O.v,x,z=[])),z.length&&(O.d={c:w,f:_,k:z});break}catch(j){O.s=3,O.v=j,O.d=null}case 3:throw O.v;case 4:throw new Error(`Factory ${String(O.v)} didn't resolve ${String(x)}`)}}:x=>Gn.this(x),{def(x,O){return o(d,x,2,O),w},set(x,O){return o(d,x,1,O),w},fork(x){let O=f(d);return x!=null?O(x):O}});return g?w.use=w:w;function S(x,O,T){let _=Ze,z=vt;try{return Ze=w,vt=T,x(O)}finally{Ze=_,vt=z}}}function o(g,d,w,S){if(g.has(d)){let x=g.get(d);if(!x.s)throw new Error(`Already read: ${String(d)}`);x.s=w,x.v=S,x.d=null}else g.set(d,{s:w,v:S})}function l(g){if(typeof g[$n]=="function")return g[$n](g);if(h(g))return typeof g.prototype[Un]=="function"?g.prototype[Un]():new g;throw new ReferenceError(`No config for ${String(g)}`)}function h(g){return typeof g=="function"&&g.prototype!==void 0&&(Object.getPrototypeOf(g.prototype)!==Object.prototype||Object.getOwnPropertyNames(g.prototype).length>1||g.toString().startsWith("class"))}}();var xs=new Set(["__proto__","prototype","constructor"]);var za=(f=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(f,{get:(o,l)=>(typeof require!="undefined"?require:o)[l]}):f)(function(f){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+f+'" is not supported')});var nn=typeof queueMicrotask=="function"?queueMicrotask:(f=>o=>f.then(o))(Promise.resolve());var Fa=2,Ms=4|Fa;var ke;(f=>{try{Object.assign(f,za("obsidian"))}catch(o){}})(ke||(ke={}));var ae,Kn=(f=>(f.service=function o(o){return f(qr).addChild(o),f.this},f.plugin=function o(o){if(!je)ae=o.app,je=f.fork(),je.set(ke.Plugin,o),je.set(o.constructor,o),o.addChild(je.use(qr));else if(o!==je.use(ke.Plugin))throw new TypeError("use.plugin() called on multiple plugins");return je},f.def(ke.Plugin,()=>{throw new Error("Plugin not created yet")}),f.def(ke.App,()=>f(ke.Plugin).app),f))(Gn),je;var Wa=class extends Pe.Component{constructor(){super(...arguments);this.use=Kn.service(this)}},qr=class extends Pe.Component{constructor(){super(...arguments);this.children=new Set([this])}onload(){this.loaded=!0}onunload(){this.loaded=!1,this.children.clear()}addChild(f){return this.children.has(f)||(this.children.add(f),this.loaded?nn(()=>super.addChild(f)):super.addChild(f)),f}};function Zn(f,o){nn(()=>f.removeChild(o))}function Va(f,o){let l=new ke.Component;l.onload=()=>{Zn(f,l),f=null,o()},f.addChild(l)}function Na(f){let o=ae.workspace;switch(f==null?void 0:f.getRoot()){case o.rootSplit:case o.floatingSplit:case o.leftSplit:case o.rightSplit:return!0;default:return!1}}var Xr=class extends Pe.Component{constructor(f,o){super();this.use=f,this.container=o,this.win=this.container.win}"use.factory"(){return new Ba(this.constructor)}static onload(f){}static onunload(f){}},Ba=class extends Wa{constructor(f){super();this.factory=f,this.instances=new Map,this.watching=!1,this.layoutReadyCallbacks=[]}onload(){var f,o;this.registerEvent(ae.workspace.on("layout-change",()=>{ae.workspace.layoutReady&&this.layoutReadyCallbacks.length&&(this.layoutReadyCallbacks.forEach(nn),this.layoutReadyCallbacks=[])})),(o=(f=this.factory).onload)==null||o.call(f,this.use)}onLeafChange(f,o){return this.onLayoutReady(()=>f.call(o,ae.workspace.activeLeaf)),ae.workspace.on("active-leaf-change",l=>{ae.workspace.layoutReady&&f.call(o,l)})}onLayoutReady(f){ae.workspace.layoutReady?nn(f):this.layoutReadyCallbacks.push(f)}onunload(){var f,o;(o=(f=this.factory).onunload)==null||o.call(f,this.use)}watch(){if(!this._loaded)Va(this,()=>this.watch());else if(!this.watching){let{workspace:f}=ae,o=this;this.watching=!0,this.registerEvent(f.on("window-open",l=>{this.onLayoutReady(()=>this.forContainer(l))})),this.register(te(f,{clearLayout(l){return async function(){try{return await l.call(this)}finally{o.onLayoutReady(()=>o.forAll())}}}})),this.onLayoutReady(()=>this.forAll())}return this}forWindow(f=(l=>(l=window.activeWindow)!=null?l:window)(),o=!0){let l=Ya(f);if(l)return this.forContainer(l,o)}forContainer(f,o=!0){f=f.getContainer();let l=this.instances.get(f);return!l&&o&&(l=new this.factory(this.use,f),l&&(this.instances.set(f,l),this.addChild(l),f.component.addChild(l),l.register(()=>{Zn(this,l),Zn(f.component,l),this.instances.delete(f)}))),l}forDom(f,o=!0){return this.forWindow(Xa(f),o)}forLeaf(f=ae.workspace.activeLeaf,o=!0){if(Na(f))return this.forContainer(f.getContainer(),o)}forView(f,o=!0){return this.forLeaf(f.leaf,o)}forAll(f=!0){return qa().map(o=>this.forContainer(o,f)).filter(o=>o)}};function qa(){return[ae.workspace.rootSplit].concat(ae.workspace.floatingSplit.children)}function Xa(f){return f.win||(f.ownerDocument||f).defaultView||window}function Ya(f){if(f===window)return ae.workspace.rootSplit;let{floatingSplit:o}=ae.workspace;if(o){for(let l of o.children)if(f===l.win)return l}}var J=Ue(require("obsidian"));var rn={regularLinks:"sidebar",defaultMode:"match",autoPin:"onMove",triggerDelay:300,closeDelay:600,autoFocus:!0,rollDown:!1,snapToEdges:!1,initialHeight:"340px",initialWidth:"400px",showViewHeader:!1,imageZoom:!0,footnotes:"native",headings:"sidebar",blocks:"floating",hoverEmbeds:"sidebar",sidebarAutoFocus:!1,sidebarPosition:"right",sidebarAutoReveal:!0},$a={preview:"Reading view",source:"Editing view",match:"Match current view"},Ua={onMove:"On drag or resize",always:"Always"},Jn=class extends J.PluginSettingTab{constructor(o,l){super(o,l);this.plugin=l}hide(){}display(){let{containerEl:o}=this;o.empty(),o.createEl("h3",{text:"General Settings"}),new J.Setting(o).setName("View Mode").addDropdown(l=>{l.addOptions($a),l.setValue(this.plugin.settings.defaultMode),l.onChange(async h=>{this.plugin.settings.defaultMode=h,await this.plugin.saveSettings()})}),new J.Setting(o).setName("Hover Trigger Delay (ms)").setDesc("How long to wait before showing a Hover Editor when hovering over a link").addText(l=>{l.setPlaceholder(String(this.plugin.settings.triggerDelay)),l.inputEl.type="number",l.setValue(String(this.plugin.settings.triggerDelay)),l.onChange(async h=>{this.plugin.settings.triggerDelay=Number(h),this.plugin.saveSettings()})}),o.createEl("h3",{text:"Preview Modes"}),new J.Setting(o).setName("Regular links").setDesc("How to preview regular note links ([[Note]])").addDropdown(l=>l.addOption("native","Native preview").addOption("floating","Floating hover editor").addOption("sidebar","right or left sidebar").setValue(this.plugin.settings.regularLinks).onChange(async h=>{this.plugin.settings.regularLinks=h,await this.plugin.saveSettings()})),new J.Setting(o).setName("Heading links").setDesc("How to preview links to headings (#Heading)").addDropdown(l=>l.addOption("native","Native preview").addOption("floating","Floating hover editor").addOption("sidebar","right or left sidebar").setValue(this.plugin.settings.headings).onChange(async h=>{this.plugin.settings.headings=h,await this.plugin.saveSettings()})),new J.Setting(o).setName("Block links").setDesc("How to preview links to blocks (#^blockid)").addDropdown(l=>l.addOption("native","Native preview").addOption("floating","Floating hover editor").addOption("sidebar","right or left sidebar").setValue(this.plugin.settings.blocks).onChange(async h=>{this.plugin.settings.blocks=h,await this.plugin.saveSettings()})),new J.Setting(o).setName("Embed links").setDesc("How to preview embedded content (![[image]] or ![[note]])").addDropdown(l=>l.addOption("native","Native preview").addOption("floating","Floating hover editor").addOption("sidebar","right or left sidebar").setValue(this.plugin.settings.hoverEmbeds).onChange(async h=>{this.plugin.settings.hoverEmbeds=h,await this.plugin.saveSettings()})),new J.Setting(o).setName("Footnote links").setDesc("How to preview footnote links ([^1])").addDropdown(l=>l.addOption("native","Native preview").addOption("floating","Floating hover editor").addOption("sidebar","right or left sidebar").setValue(this.plugin.settings.footnotes).onChange(async h=>{this.plugin.settings.footnotes=h,await this.plugin.saveSettings()})),o.createEl("h3",{text:"Sidebar Modes"}),new J.Setting(o).setName("Sidebar position").setDesc("Which sidebar to use for preview. Requires restarting the plugin to take effect.").addDropdown(l=>l.addOption("left","Left sidebar").addOption("right","right or left sidebar").setValue(this.plugin.settings.sidebarPosition).onChange(async h=>{this.plugin.settings.sidebarPosition=h,await this.plugin.saveSettings()})),new J.Setting(o).setName("Auto-reveal sidebar").setDesc("Automatically open/reveal the sidebar when hovering links").addToggle(l=>l.setValue(this.plugin.settings.sidebarAutoReveal).onChange(async h=>{this.plugin.settings.sidebarAutoReveal=h,await this.plugin.saveSettings()})),new J.Setting(o).setName("Auto-focus sidebar").setDesc("Automatically move cursor focus to the sidebar preview").addToggle(l=>l.setValue(this.plugin.settings.sidebarAutoFocus).onChange(async h=>{this.plugin.settings.sidebarAutoFocus=h,await this.plugin.saveSettings()})),o.createEl("h3",{text:"Hover Settings"}),new J.Setting(o).setName("Auto Focus").setDesc("Set the hover editor as the active pane when opened").addToggle(l=>l.setValue(this.plugin.settings.autoFocus).onChange(h=>{this.plugin.settings.autoFocus=h,this.plugin.saveSettings()})),new J.Setting(o).setName("Auto Pin").addDropdown(l=>{l.addOptions(Ua),l.setValue(this.plugin.settings.autoPin),l.onChange(async h=>{this.plugin.settings.autoPin=h,await this.plugin.saveSettings()})}),new J.Setting(o).setName("Minimize downwards").setDesc("When double clicking to minimize, the window will roll down instead of rolling up").addToggle(l=>l.setValue(this.plugin.settings.rollDown).onChange(h=>{this.plugin.settings.rollDown=h,this.plugin.saveSettings()})),new J.Setting(o).setName("Snap to edges").setDesc(`Quickly arrange popovers by dragging them to the edges of the screen. The left and right edges 
        will maximize the popover vertically. The top edge will maximize the popover to fill the entire 
        screen. Dragging the popovers away from the edges will restore the popver to its original size.`).addToggle(l=>l.setValue(this.plugin.settings.snapToEdges).onChange(h=>{this.plugin.settings.snapToEdges=h,this.plugin.saveSettings()})),new J.Setting(o).setName("Show view header by default").setDesc(`Show the view header by default when triggering a hover editor.
         When disabled, view headers will only show if you click the view header icon to the left of the minimize button.`).addToggle(l=>l.setValue(this.plugin.settings.showViewHeader).onChange(h=>{this.plugin.settings.showViewHeader=h,this.plugin.saveSettings()})),new J.Setting(o).setName("Click to zoom image").setDesc(`Click and hold an image within a hover editor to temporarily maximize the popover and image to fill the entire viewport. 
        On mouse up, the hover editor will restore to its original size.`).addToggle(l=>l.setValue(this.plugin.settings.imageZoom).onChange(h=>{this.plugin.settings.imageZoom=h,this.plugin.saveSettings()})),new J.Setting(o).setName("Initial popover width").setDesc("Enter any valid CSS unit").addText(l=>{l.setPlaceholder(this.plugin.settings.initialWidth),l.inputEl.type="text",l.setValue(this.plugin.settings.initialWidth),l.onChange(async h=>{h=Vn(h),h||(h=rn.initialWidth),this.plugin.settings.initialWidth=h,this.plugin.saveSettings()})}),new J.Setting(o).setName("Initial popover height").setDesc("Enter any valid CSS unit").addText(l=>{l.setPlaceholder(String(this.plugin.settings.initialHeight)),l.inputEl.type="text",l.setValue(String(this.plugin.settings.initialHeight)),l.onChange(async h=>{h=Vn(h),h||(h=rn.initialHeight),this.plugin.settings.initialHeight=h,this.plugin.saveSettings()})}),new J.Setting(o).setName("Hover Close Delay (ms)").setDesc("How long to wait before closing a Hover Editor once the mouse leaves").addText(l=>{l.setPlaceholder(String(this.plugin.settings.closeDelay)),l.inputEl.type="number",l.setValue(String(this.plugin.settings.closeDelay)),l.onChange(async h=>{this.plugin.settings.closeDelay=Number(h),this.plugin.saveSettings()})})}};var ei=Ue($r());var Ur=class extends Xr{constructor(){super(...arguments);this.interact=this.createInteractor();this.plugin=this.use(on)}createInteractor(){if(this.win===window)return ei.default;let o=ei.default.scope,h=new o.constructor().init(this.win).interactStatic;for(let g of o._plugins.list)h.use(g);return h}onload(){this.win.addEventListener("resize",this.plugin.debouncedPopoverReflow)}onunload(){this.win.removeEventListener("resize",this.plugin.debouncedPopoverReflow);try{this.interact.removeDocument(this.win.document)}catch(o){console.error(o)}}},on=class extends H.Plugin{constructor(){super(...arguments);this.currentSidebarLeaf=null;this.use=Kn.plugin(this);this.interact=this.use(Ur);this.debouncedPopoverReflow=(0,H.debounce)(()=>{U.activePopovers().forEach(o=>{var l;(l=o.interact)==null||l.reflow({name:"drag",axis:"xy"})})},100,!0)}async onload(){this.registerActivePopoverHandler(),this.registerFileRenameHandler(),this.registerContextMenuHandler(),this.registerCommands(),this.patchUnresolvedGraphNodeHover(),this.patchWorkspace(),this.patchQuickSwitcher(),this.patchWorkspaceLeaf(),this.patchItemView(),this.patchMarkdownPreviewRenderer(),this.patchMarkdownPreviewView(),await this.loadSettings(),this.registerSettingsTab(),this.app.workspace.onLayoutReady(()=>{this.patchSlidingPanes(),this.patchLinkHover(),setTimeout(()=>{this.app.workspace.trigger("css-change")},2e3)})}async openFileInSidebar(o,l,h){if(!this.currentSidebarLeaf||this.currentSidebarLeaf.disposed){let S=this.settings.sidebarPosition==="left"?()=>{var x;return(x=this.app.workspace.getLeftLeaf(!1))!=null?x:this.app.workspace.getLeftLeaf(!0)}:()=>{var x;return(x=this.app.workspace.getRightLeaf(!1))!=null?x:this.app.workspace.getRightLeaf(!0)};this.currentSidebarLeaf=S()}let g=this.currentSidebarLeaf,d=this.buildEphemeralState(o,l,h),w=this.getViewMode();await g.setViewState({type:"markdown",state:{file:o.path,mode:w},active:!0}),setTimeout(()=>{g&&!g.disposed&&g.setEphemeralState(d)},50),this.settings.sidebarAutoReveal&&this.app.workspace.revealLeaf(g),this.settings.sidebarAutoFocus&&this.app.workspace.setActiveLeaf(g,{focus:!0})}buildEphemeralState(o,l,h){let g=this.app.metadataCache.getFileCache(o),d=l.includes("#")?l.split("#")[1]:"",w=g?(0,H.resolveSubpath)(g,d):void 0,S={subpath:d?`#${d}`:void 0,...h};return w&&(S.line=w.start.line,S.startLoc=w.start,S.endLoc=w.end),S}getViewMode(){var l,h;let o=this.settings.defaultMode;if(o==="match"){let g=this.app.workspace.getActiveViewOfType(H.ItemView);return(h=(l=g==null?void 0:g.getMode)==null?void 0:l.call(g))!=null?h:"preview"}return o}patchWorkspaceLeaf(){this.register(te(H.WorkspaceLeaf.prototype,{getRoot(o){return function(){let l=o.call(this);return l.getRoot===this.getRoot?l:l.getRoot()}},onResize(o){return function(){var l;(l=this.view)==null||l.onResize()}},setViewState(o){return async function(l,h){var d,w,S;let g=await o.call(this,l,h);try{let x=U.forLeaf(this);if(x){l.type&&x.hoverEl.setAttribute("data-active-view-type",l.type);let O=x.hoverEl.querySelector(".popover-title");O&&(O.textContent=(d=this.view)==null?void 0:d.getDisplayText(),((S=(w=this.view)==null?void 0:w.file)==null?void 0:S.path)?O.setAttribute("data-path",this.view.file.path):O.removeAttribute("data-path"))}}catch(x){}return g}},setEphemeralState(o){return function(l){var h;o.call(this,l),l.focus&&((h=this.view)==null?void 0:h.getViewType())==="empty"&&(this.view.contentEl.tabIndex=-1,this.view.contentEl.focus())}}})),this.register(te(H.WorkspaceItem.prototype,{getContainer(o){return function(){if(!!o)return!this.parentSplit||this instanceof H.WorkspaceContainer?o.call(this):this.parentSplit.getContainer()}}}))}patchQuickSwitcher(){let o=this,{QuickSwitcherModal:l}=this.app.internalPlugins.plugins.switcher.instance,h=te(l.prototype,{open(g){return function(){let d=g.call(this);return this.instructionsEl&&setTimeout(te(this.instructionsEl,{empty(w){return()=>{}}}),0),this.setInstructions([{command:H.Platform.isMacOS?"cmd p":"ctrl p",purpose:"to open in new popover"}]),this.scope.register(["Mod"],"p",w=>{this.close();let S=this.chooser.values[this.chooser.selectedItem];if(!(S==null?void 0:S.file))return;let x=o.spawnPopover(void 0,()=>this.app.workspace.setActiveLeaf(x,!1,!0));return x.openFile(S.file),!1}),d}}});this.register(h)}patchItemView(){let o=this,[l,h]=H.View.prototype.onPaneMenu?[H.View,"onPaneMenu"]:[H.ItemView,"onMoreOptionsMenu"],g=te(l.prototype,{[h](d){return function(w,...S){return(this.leaf?U.forLeaf(this.leaf):void 0)?w.addItem(O=>{var T,_;(_=(T=O.setIcon("popup-open").setTitle("Dock Hover Editor to workspace").onClick(()=>{o.dockPopoverToWorkspace(this.leaf)})).setSection)==null||_.call(T,"open")}):(w.addItem(O=>{var T,_;(_=(T=O.setIcon("popup-open").setTitle("Open in Hover Editor").onClick(async()=>{let z=o.spawnPopover(),{autoFocus:j}=o.settings;await z.setViewState({...this.leaf.getViewState(),active:j},{focus:j}),j&&(await sleep(200),this.app.workspace.setActiveLeaf(z,{focus:!0}))})).setSection)==null||_.call(T,"open")}),w.addItem(O=>{var T,_;(_=(T=O.setIcon("popup-open").setTitle("Convert to Hover Editor").onClick(()=>{o.convertLeafToPopover(this.leaf)})).setSection)==null||_.call(T,"open")})),d.call(this,w,...S)}}});this.register(g),this.register(te(H.ItemView.prototype,{load(d){return function(){if(!this.iconEl){let w=this.iconEl=this.headerEl.createDiv("clickable-icon view-header-icon");this.headerEl.prepend(w),w.draggable=!0,w.addEventListener("dragstart",S=>{this.app.workspace.onDragLeaf(S,this.leaf)}),(0,H.setIcon)(w,this.getIcon()),(0,H.setTooltip)(w,"Drag to rearrange")}return d.call(this)}}}))}patchMarkdownPreviewView(){this.register(te(H.MarkdownPreviewView.prototype,{onResize(o){return function(){this.renderer.onResize(),this.view.scroll!==null&&this.view.scroll!==this.getScroll()&&this.renderer.applyScrollDelayed(this.view.scroll)}}}))}patchMarkdownPreviewRenderer(){let o=this,l=te(H.MarkdownPreviewRenderer,{registerDomEvents(h){return function(g,d,...w){return g==null||g.on("mouseover",".internal-embed.is-loaded",(S,x)=>{var O,T,_,z,j;x&&o.settings.hoverEmbeds!=="native"&&app.workspace.trigger("hover-link",{event:S,source:x.matchParent(".markdown-source-view")?"editor":"preview",hoverParent:(O=d.hoverParent)!=null?O:d.info,targetEl:x,linktext:x.getAttribute("src"),sourcePath:((j=(z=(_=(T=d.info)!=null?T:d).getFile)==null?void 0:z.call(_))==null?void 0:j.path)||""})}),h.call(this,g,d,...w)}}});this.register(l)}patchWorkspace(){let o=!1,l=te(H.Workspace.prototype,{changeLayout(h){return async function(g){o=!0;try{await h.call(this,g)}finally{o=!1}}},recordHistory(h){return function(g,d,...w){var x;if(!(!((x=this.app.plugins.plugins["pane-relief"])==null?void 0:x._loaded)&&ft(g)))return h.call(this,g,d,...w)}},iterateLeaves(h){return function(g,d){if(h.call(this,g,d))return!0;let w=typeof g=="function"?g:d,S=typeof g=="function"?d:g;if(!S||o)return!1;if(S===app.workspace.rootSplit||H.WorkspaceContainer&&S instanceof H.WorkspaceContainer){for(let x of U.popoversForWindow(S.win))if(h.call(this,w,x.rootSplit))return!0}return!1}},getDropLocation(h){return function(d){for(let w of U.activePopovers()){let S=this.recursiveGetTarget(d,w.rootSplit);if(S)return H.requireApiVersion&&(0,H.requireApiVersion)("0.15.3")?S:{target:S,sidedock:!1}}return h.call(this,d)}},onDragLeaf(h){return function(g,d){let w=U.forLeaf(d);return w==null||w.togglePin(!0),h.call(this,g,d)}}});this.register(l)}patchSlidingPanes(){var l;let o=(l=this.app.plugins.plugins["sliding-panes-obsidian"])==null?void 0:l.constructor;if(o){let h=te(o.prototype,{handleFileOpen(g){return function(...d){if(!ft(this.app.workspace.activeLeaf))return g.call(this,...d)}},handleLayoutChange(g){return function(...d){if(!ft(this.app.workspace.activeLeaf))return g.call(this,...d)}},focusActiveLeaf(g){return function(...d){if(!ft(this.app.workspace.activeLeaf))return g.call(this,...d)}}});this.register(h)}}patchLinkHover(){let o=this,l=this.app.internalPlugins.plugins["page-preview"];if(!l.enabled)return;let h=te(l.instance.constructor.prototype,{onHoverLink(g){return function(d,...w){return d&&de(d.event,MouseEvent)&&ht(d.event),g.call(this,d,...w)}},onLinkHover(g){return function(d,w,S,x,O,...T){let{subpath:_}=(0,H.parseLinktext)(S),z;if(_&&_[0]==="#"?_.startsWith("#[^")?z=o.settings.footnotes:_.startsWith("#^")?z=o.settings.blocks:z=o.settings.headings:S.startsWith("!")?z=o.settings.hoverEmbeds:z=o.settings.regularLinks,z==="native")return g.call(this,d,w,S,x,O,...T);let j=()=>{let B=o.app.metadataCache.getFirstLinkpathDest((0,H.parseLinktext)(S).path,x);if(!(B instanceof H.TFile)){g.call(this,d,w,S,x,O,...T);return}z==="sidebar"?(async()=>{await o.openFileInSidebar(B,S,O)})():Br(o,d,w,S,x,O,...T)};o.settings.triggerDelay>0?setTimeout(j,o.settings.triggerDelay):j()}}});this.register(h),l.disable(),l.enable(),o.register(function(){!l.enabled||(l.disable(),l.enable())})}registerContextMenuHandler(){this.registerEvent(this.app.workspace.on("file-menu",(o,l,h,g)=>{let d=g?U.forLeaf(g):void 0;l instanceof H.TFile&&!d&&!g&&o.addItem(w=>{var S,x;(x=(S=w.setIcon("popup-open").setTitle("Open in Hover Editor").onClick(()=>{this.spawnPopover().openFile(l)})).setSection)==null||x.call(S,"open")})}))}registerActivePopoverHandler(){this.registerEvent(this.app.workspace.on("active-leaf-change",o=>{var h,g,d,w,S;(h=U.activePopover)==null||h.hoverEl.removeClass("is-active");let l=U.activePopover=o?U.forLeaf(o):void 0;if(l&&o){l.activate(),l.hoverEl.addClass("is-active");let x=l.hoverEl.querySelector(".popover-title");if(!x)return;x.textContent=(g=o.view)==null?void 0:g.getDisplayText(),((d=o==null?void 0:o.view)==null?void 0:d.getViewType())&&l.hoverEl.setAttribute("data-active-view-type",o.view.getViewType()),((S=(w=o.view)==null?void 0:w.file)==null?void 0:S.path)?x.setAttribute("data-path",o.view.file.path):x.removeAttribute("data-path")}}))}registerFileRenameHandler(){this.app.vault.on("rename",(o,l)=>{U.iteratePopoverLeaves(this.app.workspace,h=>{var g,d;if(o===((g=h==null?void 0:h.view)==null?void 0:g.file)&&o instanceof H.TFile){let w=U.forLeaf(h);if(w==null?void 0:w.hoverEl){let S=w.hoverEl.querySelector(".popover-title");if(!S)return;let x=S.getAttribute("data-path");l===x&&(S.textContent=(d=h.view)==null?void 0:d.getDisplayText(),S.setAttribute("data-path",o.path))}}})})}patchUnresolvedGraphNodeHover(){var d,w;let o=new H.WorkspaceLeaf(this.app),l=this.app.internalPlugins.plugins.graph.views.localgraph(o),h=l.engine.constructor;o.detach(),(w=(d=l.renderer)==null?void 0:d.worker)==null||w.terminate();let g=te(h.prototype,{onNodeHover(S){return function(x,O,T,..._){if(T==="unresolved"){if(this.onNodeUnhover(),de(x,MouseEvent)){if(this.hoverPopover&&this.hoverPopover.state!==H.PopoverState.Hidden&&this.lastHoverLink===O)return this.hoverPopover.onTarget=!0,void this.hoverPopover.transition();this.lastHoverLink=O,this.app.workspace.trigger("hover-link",{event:x,source:"graph",hoverParent:this,targetEl:null,linktext:O})}}else return S.call(this,x,O,T,..._)}}});this.register(g),o.detach()}onunload(){U.activePopovers().forEach(o=>o.hide())}async loadSettings(){this.settings=Object.assign({},rn,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}registerCommands(){this.addCommand({id:"bounce-popovers",name:"Toggle bouncing popovers",callback:()=>{this.activePopovers.forEach(o=>{o.toggleBounce()})}}),this.addCommand({id:"open-new-popover",name:"Open new Hover Editor",callback:()=>{let o=this.spawnPopover(void 0,()=>this.app.workspace.setActiveLeaf(o,!1,!0))}}),this.addCommand({id:"open-link-in-new-popover",name:"Open link under cursor in new Hover Editor",checkCallback:o=>{let l=this.app.workspace.getActiveViewOfType(H.MarkdownView);if(l){if(!o){let h=l.editor.getClickableTokenAt(l.editor.getCursor());if((h==null?void 0:h.type)==="internal-link"){let g=this.spawnPopover(void 0,()=>this.app.workspace.setActiveLeaf(g,!1,!0));g.openLinkText(h.text,l.file.path)}}return!0}return!1}}),this.addCommand({id:"open-current-file-in-new-popover",name:"Open current file in new Hover Editor",checkCallback:o=>{var h,g;let l=(g=(h=this.app.workspace.activeEditor)==null?void 0:h.file)!=null?g:this.app.workspace.getActiveFile();if(l){if(!o){let d=this.spawnPopover(void 0,()=>this.app.workspace.setActiveLeaf(d,!1,!0));d.openFile(l)}return!0}return!1}}),this.addCommand({id:"convert-active-pane-to-popover",name:"Convert active pane to Hover Editor",checkCallback:o=>{let{activeLeaf:l}=this.app.workspace;return l?(o||this.convertLeafToPopover(l),!0):!1}}),this.addCommand({id:"dock-active-popover-to-workspace",name:"Dock active Hover Editor to workspace",checkCallback:o=>{let{activeLeaf:l}=this.app.workspace;return l&&U.forLeaf(l)?(o||this.dockPopoverToWorkspace(l),!0):!1}}),this.addCommand({id:"restore-active-popover",name:"Restore active Hover Editor",checkCallback:o=>jr(o)}),this.addCommand({id:"minimize-active-popover",name:"Minimize active Hover Editor",checkCallback:o=>Rr(o)}),Lr.forEach(o=>{this.addCommand({id:`snap-active-popover-to-${o}`,name:`Snap active Hover Editor to ${o}`,checkCallback:l=>Ir(o,l)})})}convertLeafToPopover(o){if(!o)return;let l=this.spawnPopover(void 0,()=>{let{parentSplit:h}=l,{parentSplit:g}=o;g.removeChild(o),h.replaceChild(0,o,!0),this.app.workspace.setActiveLeaf(o,{focus:!0})});return l}dockPopoverToWorkspace(o){if(!o)return;o.parentSplit.removeChild(o);let{rootSplit:l}=this.app.workspace;return this.app.workspace.iterateLeaves(l,h=>(h.parentSplit.insertChild(-1,o),!0)),this.app.workspace.activeLeaf=null,this.app.workspace.setActiveLeaf(o,{focus:!0}),o}spawnPopover(o,l){let h=this.app.workspace.activeLeaf;o||(o=h.containerEl);let g=new U(h,o,this,void 0,l);return g.togglePin(!0),g.attachLeaf()}registerSettingsTab(){this.settingsTab=new Jn(this.app,this),this.addSettingTab(this.settingsTab)}};function Yn(f){let o=[];for(let l=0;l<f;l++)o.push((16*Math.random()|0).toString(16));return o.join("")}
